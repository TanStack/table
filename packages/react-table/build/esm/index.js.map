{"version":3,"file":"index.js","sources":["../../src/utils/columnFilterRowsFn.ts","../../src/utils/globalFilterRowsFn.ts","../../src/utils/sortRowsFn.ts","../../src/utils.tsx","../../src/utils/groupRowsFn.ts","../../src/utils/expandRowsFn.ts","../../src/features/Visibility.ts","../../src/aggregationTypes.ts","../../src/features/Grouping.ts","../../src/features/Ordering.ts","../../src/features/Pinning.ts","../../src/features/Headers.ts","../../src/filterTypes.ts","../../src/features/Filters.ts","../../src/sortTypes.ts","../../src/features/Sorting.ts","../../src/features/Expanding.ts","../../src/core.tsx","../../src/createTable.tsx"],"sourcesContent":["import { ReactTable, Row, RowModel } from '../types'\nimport { ColumnFiltersState } from '../features/Filters'\nimport { Options } from '..'\n\nexport const columnFilterRowsFn: Options<\n  any,\n  any,\n  {},\n  {},\n  {}\n>['columnFilterRowsFn'] = <\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  instance: ReactTable<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n  columnFilters: ColumnFiltersState,\n  rowModel: RowModel<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n): RowModel<TData, TValue, TFilterFns, TSortingFns, TAggregationFns> => {\n  const newFilteredFlatRows: Row<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[] = []\n  const newFilteredRowsById: Record<\n    string,\n    Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n  > = {}\n\n  const filterFromChildrenUp = instance.options.filterFromChildrenUp\n\n  const filterRows = (\n    rowsToFilter: Row<\n      TData,\n      TValue,\n      TFilterFns,\n      TSortingFns,\n      TAggregationFns\n    >[],\n    depth: number\n  ) => {\n    columnFilters.forEach(({ id: columnId, value: filterValue }) => {\n      // Find the columnFilters column\n      const column = instance.getColumn(columnId)\n\n      if (!column) {\n        if (process.env.NODE_ENV !== 'production') {\n          console.warn(\n            `React-Table: Could not find a column with id: ${columnId}`\n          )\n        }\n        throw new Error()\n      }\n\n      if (depth === 0) {\n        const preFilteredRows = [...rowsToFilter]\n        column.getPreFilteredRows = () => preFilteredRows\n      }\n\n      const filterFn = instance.getColumnFilterFn(column.id)\n\n      if (!filterFn) {\n        if (process.env.NODE_ENV !== 'production') {\n          console.warn(\n            `Could not find a valid 'column.filterType' for column with the ID: ${column.id}.`\n          )\n        }\n        return\n      }\n\n      // Pass the rows, id, filterValue and column to the filterFn\n      // to get the filtered rows back\n      rowsToFilter = filterFn(rowsToFilter, [columnId], filterValue)\n    })\n\n    return rowsToFilter\n  }\n\n  if (filterFromChildrenUp) {\n    const recurseFilterRows = (\n      rowsToFilter: Row<\n        TData,\n        TValue,\n        TFilterFns,\n        TSortingFns,\n        TAggregationFns\n      >[],\n      depth = 0\n    ) => {\n      // Filter from children up\n      rowsToFilter = rowsToFilter.filter(row => {\n        if (!row.subRows?.length) {\n          return true\n        }\n\n        row.subRows = recurseFilterRows(row.subRows, depth + 1)\n\n        return row.subRows.length\n      })\n\n      rowsToFilter = filterRows(rowsToFilter, depth)\n\n      // Apply the filter to any subRows\n      rowsToFilter.forEach(row => {\n        newFilteredFlatRows.push(row)\n        newFilteredRowsById[row.id] = row\n      })\n\n      return rowsToFilter\n    }\n\n    return {\n      rows: recurseFilterRows(rowModel.rows),\n      flatRows: newFilteredFlatRows,\n      rowsById: newFilteredRowsById,\n    }\n  }\n\n  // Filters top level and nested rows\n  const recurseFilterRows = (\n    rowsToFilter: Row<\n      TData,\n      TValue,\n      TFilterFns,\n      TSortingFns,\n      TAggregationFns\n    >[],\n    depth = 0\n  ) => {\n    // Filter from parents downward\n    rowsToFilter = filterRows(rowsToFilter, depth)\n\n    // Apply the filter to any subRows\n    // We technically could do this recursively in the above loop,\n    // but that would severely hinder the API for the user, since they\n    // would be required to do that recursion in some scenarios\n    rowsToFilter.forEach(row => {\n      newFilteredFlatRows.push(row)\n      newFilteredRowsById[row.id] = row\n\n      if (!filterFromChildrenUp) {\n        if (!row.subRows?.length) {\n          return\n        }\n\n        row.subRows = recurseFilterRows(row.subRows, depth + 1)\n      }\n    })\n\n    return rowsToFilter\n  }\n\n  return {\n    rows: recurseFilterRows(rowModel.rows),\n    flatRows: newFilteredFlatRows,\n    rowsById: newFilteredRowsById,\n  }\n}\n","import { Options } from '..'\nimport { ReactTable, Row, RowModel } from '../types'\n\nexport const globalFilterRowsFn: Options<\n  any,\n  any,\n  {},\n  {},\n  {}\n>['globalFilterRowsFn'] = <\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  instance: ReactTable<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n  globalFilter: any,\n  rowModel: RowModel<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n): RowModel<TData, TValue, TFilterFns, TSortingFns, TAggregationFns> => {\n  const newFilteredFlatRows: Row<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[] = []\n  const newFilteredRowsById: Record<\n    string,\n    Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n  > = {}\n\n  const filterFromChildrenUp = instance.options.filterFromChildrenUp\n\n  const filterFn = instance.getGlobalFilterFn()\n\n  if (!filterFn) {\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn(`Could not find a valid 'globalFilterType'`)\n    }\n    return rowModel\n  }\n\n  const filterableColumns = instance\n    .getAllLeafColumns()\n    .filter(column => column.getCanGlobalFilter())\n\n  const filterableColumnIds = filterableColumns.map(d => d.id)\n\n  if (filterFromChildrenUp) {\n    const recurseFilterRows = (\n      rowsToFilter: Row<\n        TData,\n        TValue,\n        TFilterFns,\n        TSortingFns,\n        TAggregationFns\n      >[],\n      depth = 0\n    ) => {\n      // Filter from children up\n      rowsToFilter = rowsToFilter.filter(row => {\n        if (!row.subRows?.length) {\n          return true\n        }\n\n        row.subRows = recurseFilterRows(row.subRows, depth + 1)\n\n        return row.subRows.length\n      })\n\n      rowsToFilter = filterFn(rowsToFilter, filterableColumnIds, globalFilter)\n\n      // Apply the filter to any subRows\n      rowsToFilter.forEach(row => {\n        newFilteredFlatRows.push(row)\n        newFilteredRowsById[row.id] = row\n      })\n\n      return rowsToFilter\n    }\n\n    return {\n      rows: recurseFilterRows(rowModel.rows),\n      flatRows: newFilteredFlatRows,\n      rowsById: newFilteredRowsById,\n    }\n  }\n\n  // Filters top level and nested rows\n  const recurseFilterRows = (\n    rowsToFilter: Row<\n      TData,\n      TValue,\n      TFilterFns,\n      TSortingFns,\n      TAggregationFns\n    >[],\n    depth = 0\n  ) => {\n    // Filter from parents downward\n    rowsToFilter = filterFn(rowsToFilter, filterableColumnIds, globalFilter)\n\n    // Apply the filter to any subRows\n    // We technically could do this recursively in the above loop,\n    // but that would severely hinder the API for the user, since they\n    // would be required to do that recursion in some scenarios\n    rowsToFilter.forEach(row => {\n      newFilteredFlatRows.push(row)\n      newFilteredRowsById[row.id] = row\n\n      if (!filterFromChildrenUp) {\n        if (!row.subRows?.length) {\n          return\n        }\n\n        row.subRows = recurseFilterRows(row.subRows, depth + 1)\n      }\n    })\n\n    return rowsToFilter\n  }\n\n  return {\n    rows: recurseFilterRows(rowModel.rows),\n    flatRows: newFilteredFlatRows,\n    rowsById: newFilteredRowsById,\n  }\n}\n","import { ReactTable, Row, RowModel } from '../types'\nimport { SortingFn, SortingState } from '../features/Sorting'\nimport { Options } from '../types'\n\nexport const sortRowsFn: Options<any, any, {}, {}, {}>['sortRowsFn'] = <\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  instance: ReactTable<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n  sortingState: SortingState,\n  rowModel: RowModel<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n): RowModel<TData, TValue, TFilterFns, TSortingFns, TAggregationFns> => {\n  const sortedFlatRows: Row<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[] = []\n\n  // Filter out sortings that correspond to non existing columns\n  const availableSorting = sortingState.filter(sort =>\n    instance.getColumnCanSort(sort.id)\n  )\n\n  const columnInfoById: Record<\n    string,\n    {\n      sortUndefined?: false | -1 | 1\n      invertSorting?: boolean\n      sortingFn: SortingFn<\n        TData,\n        TValue,\n        TFilterFns,\n        TSortingFns,\n        TAggregationFns\n      >\n    }\n  > = {}\n\n  availableSorting.forEach(sortEntry => {\n    const column = instance.getColumn(sortEntry.id)!\n\n    columnInfoById[sortEntry.id] = {\n      sortUndefined: column.sortUndefined,\n      invertSorting: column.invertSorting,\n      sortingFn: instance.getColumnSortingFn(sortEntry.id)!,\n    }\n  })\n\n  const sortData = (\n    rows: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>[]\n  ) => {\n    // This will also perform a stable sorting using the row index\n    // if needed.\n    const sortedData = rows.slice()\n\n    sortedData.sort((rowA, rowB) => {\n      for (let i = 0; i < availableSorting.length; i += 1) {\n        const sortEntry = availableSorting[i]!\n        const columnInfo = columnInfoById[sortEntry.id]!\n        const isDesc = sortEntry?.desc ?? false\n\n        if (columnInfo.sortUndefined) {\n          const aValue = rowA.values[sortEntry.id]\n          const bValue = rowB.values[sortEntry.id]\n\n          const aUndefined = typeof aValue === 'undefined'\n          const bUndefined = typeof bValue === 'undefined'\n\n          if (aUndefined || bUndefined) {\n            return aUndefined && bUndefined ? 0 : aUndefined ? 1 : -1\n          }\n        }\n\n        // This function should always return in ascending order\n        let sortInt = columnInfo.sortingFn(rowA, rowB, sortEntry.id)\n\n        if (sortInt !== 0) {\n          if (isDesc) {\n            sortInt *= -1\n          }\n\n          if (columnInfo.invertSorting) {\n            sortInt *= -1\n          }\n\n          return sortInt\n        }\n      }\n\n      return rowA.index - rowB.index\n    })\n\n    // If there are sub-rows, sort them\n    sortedData.forEach(row => {\n      sortedFlatRows.push(row)\n      if (!row.subRows || row.subRows.length <= 1) {\n        return\n      }\n      row.subRows = sortData(row.subRows)\n    })\n\n    return sortedData\n  }\n\n  return {\n    rows: sortData(rowModel.rows),\n    flatRows: sortedFlatRows,\n    rowsById: rowModel.rowsById,\n  }\n}\n","import React from 'react'\nimport { Getter, NoInfer, PropGetterValue, Renderable } from './types'\n\nexport type IsAny<T> = 0 extends 1 & T ? true : false\nexport type PartialKeys<T, K extends keyof T> = Omit<T, K> & Partial<Pick<T, K>>\nexport type RequiredKeys<T, K extends keyof T> = Omit<T, K> &\n  Required<Pick<T, K>>\nexport type Overwrite<T, U> = Omit<T, keyof U> & U\n\nexport type DataUpdateFunction<TInput, TOutput> = (input: TInput) => TOutput\n\nexport type Updater<TInput, TOutput> =\n  | TOutput\n  | DataUpdateFunction<TInput, TOutput>\n\nexport function functionalUpdate<TInput, TOutput = TInput>(\n  updater: Updater<TInput, TOutput>,\n  input: TInput\n): TOutput {\n  return typeof updater === 'function'\n    ? (updater as DataUpdateFunction<TInput, TOutput>)(input)\n    : updater\n}\n\nexport function noop() {\n  //\n}\n\nexport function makeStateUpdater(key: string, instance: unknown) {\n  return (updater: Updater<any, any>) => {\n    ;(instance as any).setState(<TTableState,>(old: TTableState) => {\n      return {\n        ...old,\n        [key]: functionalUpdate(updater, (old as any)[key]),\n      }\n    })\n  }\n}\n\n// SSR has issues with useLayoutEffect still, so use useEffect during SSR\nexport const safeUseLayoutEffect =\n  typeof document !== 'undefined' ? React.useLayoutEffect : React.useEffect\n\nexport function useMountedLayoutEffect(fn: any, deps: any[]) {\n  const mountedRef = React.useRef(false)\n\n  safeUseLayoutEffect(() => {\n    if (mountedRef.current) {\n      fn()\n    }\n    mountedRef.current = true\n    // eslint-disable-next-line\n  }, deps)\n}\n\nexport function useGetLatest<T>(obj: T): () => T {\n  const ref = React.useRef<T>()\n  ref.current = obj\n\n  return React.useCallback(() => ref.current!, [])\n}\n\ntype AnyFunction = (...args: any) => any\n\nexport function isFunction<T extends AnyFunction>(d: any): d is T {\n  return d instanceof Function\n}\n\nexport function flattenBy<TNode>(\n  arr: TNode[],\n  getChildren: (item: TNode) => TNode[]\n) {\n  const flat: TNode[] = []\n\n  const recurse = (subArr: TNode[]) => {\n    subArr.forEach(item => {\n      flat.push(item)\n      const children = getChildren(item)\n      if (children?.length) {\n        recurse(children)\n      }\n    })\n  }\n\n  recurse(arr)\n\n  return flat\n}\n\ntype PropGetterImpl = <TBaseProps, TGetter extends Getter<TBaseProps>>(\n  initial: TBaseProps,\n  userProps?: TGetter\n) => PropGetterValue<TBaseProps, TGetter>\n\n// @ts-ignore // Just rely on the type, not the implementation\nexport const propGetter: PropGetterImpl = (initial, getter) => {\n  if (isFunction(getter)) {\n    return getter(initial)\n  }\n\n  return {\n    ...initial,\n    ...(getter ?? {}),\n  }\n}\n\nexport function memo<TDeps extends readonly any[], TResult>(\n  getDeps: () => [...TDeps],\n  fn: (...args: NoInfer<[...TDeps]>) => TResult,\n  key?: string,\n  debug?: boolean\n): () => TResult {\n  let deps: any[] = []\n  let result: TResult | undefined\n\n  return () => {\n    const newDeps = getDeps()\n    const newSerializedDeps = newDeps\n    const oldSerializedDeps = deps\n\n    const depsChanged =\n      newSerializedDeps.length !== oldSerializedDeps.length ||\n      newSerializedDeps.some(\n        (dep: any, index: number) => oldSerializedDeps[index] !== dep\n      )\n\n    if (depsChanged) {\n      if (debug) {\n        console.info(key, {\n          length: `${oldSerializedDeps.length} -> ${newSerializedDeps.length}`,\n          ...newSerializedDeps\n            .map((_, index) => {\n              if (oldSerializedDeps[index] !== newSerializedDeps[index]) {\n                return [\n                  index,\n                  oldSerializedDeps[index],\n                  newSerializedDeps[index],\n                ]\n              }\n\n              return false\n            })\n            .filter(Boolean)\n            .reduce(\n              (accu, curr: any) => ({\n                ...accu,\n                [curr[0]]: curr.slice(1),\n              }),\n              {}\n            ),\n          parent,\n        })\n      }\n      result = fn(...newDeps)\n      deps = newSerializedDeps\n    }\n\n    return result!\n  }\n}\n\n// Copied from: https://github.com/jonschlinkert/is-plain-object\nexport function isPlainObject(o: any): o is Object {\n  if (!hasObjectPrototype(o)) {\n    return false\n  }\n\n  // If has modified constructor\n  const ctor = o.constructor\n  if (typeof ctor === 'undefined') {\n    return true\n  }\n\n  // If has modified prototype\n  const prot = ctor.prototype\n  if (!hasObjectPrototype(prot)) {\n    return false\n  }\n\n  // If constructor does not have an Object-specific method\n  if (!prot.hasOwnProperty('isPrototypeOf')) {\n    return false\n  }\n\n  // Most likely a plain Object\n  return true\n}\n\nfunction hasObjectPrototype(o: any): boolean {\n  return Object.prototype.toString.call(o) === '[object Object]'\n}\n\nexport type Render = typeof flexRender\n\nexport function flexRender<TProps extends {}>(\n  Comp: Renderable<TProps>,\n  props: TProps\n): React.ReactNode {\n  return !Comp ? null : isReactComponent(Comp) ? <Comp {...props} /> : Comp\n}\n\nfunction isReactComponent(component: unknown): component is React.FC {\n  return (\n    isClassComponent(component) ||\n    typeof component === 'function' ||\n    isExoticComponent(component)\n  )\n}\n\nfunction isClassComponent(component: any) {\n  return (\n    typeof component === 'function' &&\n    (() => {\n      const proto = Object.getPrototypeOf(component)\n      return proto.prototype && proto.prototype.isReactComponent\n    })()\n  )\n}\n\nfunction isExoticComponent(component: any) {\n  return (\n    typeof component === 'object' &&\n    typeof component.$$typeof === 'symbol' &&\n    ['react.memo', 'react.forward_ref'].includes(component.$$typeof.description)\n  )\n}\n\n// export function hashString(str: string, seed = 0): string {\n//   let h1 = 0xdeadbeef ^ seed,\n//     h2 = 0x41c6ce57 ^ seed\n//   for (let i = 0, ch; i < str.length; i++) {\n//     ch = str.charCodeAt(i)\n//     h1 = Math.imul(h1 ^ ch, 2654435761)\n//     h2 = Math.imul(h2 ^ ch, 1597334677)\n//   }\n//   h1 =\n//     Math.imul(h1 ^ (h1 >>> 16), 2246822507) ^\n//     Math.imul(h2 ^ (h2 >>> 13), 3266489909)\n//   h2 =\n//     Math.imul(h2 ^ (h2 >>> 16), 2246822507) ^\n//     Math.imul(h1 ^ (h1 >>> 13), 3266489909)\n//   return (4294967296 * (2097151 & h2) + (h1 >>> 0)).toString()\n// }\n","import { ReactTable, Row, RowModel } from '../types'\nimport { Options } from '../types'\nimport { GroupingState } from '../features/Grouping'\nimport { flattenBy } from '../utils'\n\nexport const groupRowsFn: Options<any, any, {}, {}, {}>['groupRowsFn'] = <\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  instance: ReactTable<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n  groupingState: GroupingState,\n  sortedRowModel: RowModel<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >\n): RowModel<TData, TValue, TFilterFns, TSortingFns, TAggregationFns> => {\n  // Filter the grouping list down to columns that exist\n  const existingGrouping = groupingState.filter(columnId =>\n    instance.getColumn(columnId)\n  )\n\n  // Find the columns that can or are aggregating\n  // Uses each column to aggregate rows into a single value\n  const aggregateRowsToValues = (\n    leafRows: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>[],\n    groupedRows: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>[],\n    depth: number\n  ) => {\n    const values: Record<string, unknown> = {}\n\n    instance.getAllLeafColumns().forEach(column => {\n      // Don't aggregate columns that are in the grouping\n      if (existingGrouping.includes(column.id)) {\n        values[column.id] = groupedRows[0]\n          ? groupedRows[0].values[column.id]\n          : null\n        return\n      }\n\n      // Aggregate the values\n      const aggregateFn = instance.getColumnAggregationFn(column.id)\n\n      if (aggregateFn) {\n        // Get the columnValues to aggregate\n        const groupedValues = groupedRows.map(row => row.values[column.id])\n\n        // Get the columnValues to aggregate\n        const leafValues = leafRows.map(row => {\n          let columnValue = row.values[column.id]\n\n          if (!depth && column.aggregateValue) {\n            columnValue = column.aggregateValue(columnValue)\n          }\n\n          return columnValue\n        })\n\n        values[column.id] = aggregateFn(leafValues, groupedValues)\n      } else if (column.aggregationType) {\n        console.info({ column })\n        throw new Error(\n          process.env.NODE_ENV !== 'production'\n            ? `React Table: Invalid column.aggregateType option for column listed above`\n            : ''\n        )\n      } else {\n        values[column.id] = null\n      }\n    })\n\n    return values\n  }\n\n  const groupedFlatRows: Row<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[] = []\n  const groupedRowsById: Record<\n    string,\n    Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n  > = {}\n  // const onlyGroupedFlatRows: Row[] = [];\n  // const onlyGroupedRowsById: Record<RowId, Row> = {};\n  // const nonGroupedFlatRows: Row[] = [];\n  // const nonGroupedRowsById: Record<RowId, Row> = {};\n\n  // Recursively group the data\n  const groupUpRecursively = (\n    rows: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>[],\n    depth = 0,\n    parentId: string\n  ) => {\n    // This is the last level, just return the rows\n    if (depth === existingGrouping.length) {\n      return rows\n    }\n\n    const columnId = existingGrouping[depth]!\n\n    // Group the rows together for this level\n    const rowGroupsMap = groupBy(rows, columnId)\n\n    // Peform aggregations for each group\n    const aggregatedGroupedRows = Array.from(rowGroupsMap.entries()).map(\n      ([groupingValue, groupedRows], index) => {\n        let id = `${columnId}:${groupingValue}`\n        id = parentId ? `${parentId}>${id}` : id\n\n        // First, Recurse to group sub rows before aggregation\n        const subRows = groupUpRecursively(groupedRows, depth + 1, id)\n\n        // Flatten the leaf rows of the rows in this group\n        const leafRows = depth\n          ? flattenBy(groupedRows, row => row.leafRows)\n          : groupedRows\n\n        const values = aggregateRowsToValues(leafRows, groupedRows, depth)\n\n        const row = instance.createRow(id, undefined, index, depth, values)\n\n        Object.assign(row, {\n          groupingColumnId: columnId,\n          groupingValue,\n          subRows,\n          leafRows,\n        })\n\n        subRows.forEach(subRow => {\n          groupedFlatRows.push(subRow)\n          groupedRowsById[subRow.id] = subRow\n          // if (subRow.getIsGrouped?.()) {\n          //   onlyGroupedFlatRows.push(subRow);\n          //   onlyGroupedRowsById[subRow.id] = subRow;\n          // } else {\n          //   nonGroupedFlatRows.push(subRow);\n          //   nonGroupedRowsById[subRow.id] = subRow;\n          // }\n        })\n\n        return row\n      }\n    )\n\n    return aggregatedGroupedRows\n  }\n\n  const groupedRows = groupUpRecursively(sortedRowModel.rows, 0, '')\n\n  groupedRows.forEach(subRow => {\n    groupedFlatRows.push(subRow)\n    groupedRowsById[subRow.id] = subRow\n    // if (subRow.getIsGrouped?.()) {\n    //   onlyGroupedFlatRows.push(subRow);\n    //   onlyGroupedRowsById[subRow.id] = subRow;\n    // } else {\n    //   nonGroupedFlatRows.push(subRow);\n    //   nonGroupedRowsById[subRow.id] = subRow;\n    // }\n  })\n\n  return {\n    rows: groupedRows,\n    flatRows: groupedFlatRows,\n    rowsById: groupedRowsById,\n  }\n}\n\nfunction groupBy<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>(\n  rows: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>[],\n  columnId: string\n) {\n  const groupMap = new Map<\n    any,\n    Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>[]\n  >()\n\n  return rows.reduce((map, row) => {\n    const resKey = `${row.values[columnId]}`\n    const previous = map.get(resKey)\n    if (!previous) {\n      map.set(resKey, [row])\n    } else {\n      map.set(resKey, [...previous, row])\n    }\n    return map\n  }, groupMap)\n}\n","import { ReactTable, Row, RowModel } from '../types'\nimport { Options } from '../types'\nimport { ExpandedState } from '../features/Expanding'\n\nexport const expandRowsFn: Options<any, any, {}, {}, {}>['expandRowsFn'] = <\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  instance: ReactTable<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n  _expandedState: ExpandedState,\n  sortedRowModel: RowModel<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >\n): RowModel<TData, TValue, TFilterFns, TSortingFns, TAggregationFns> => {\n  const expandedRows: Row<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[] = []\n\n  const { expandSubRows } = instance.options\n\n  const handleRow = (\n    row: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n  ) => {\n    expandedRows.push(row)\n\n    if (\n      expandSubRows &&\n      row.subRows?.length &&\n      instance.getIsRowExpanded(row.id)\n    ) {\n      row.subRows.forEach(handleRow)\n    }\n  }\n\n  sortedRowModel.rows.forEach(handleRow)\n\n  return {\n    rows: expandedRows,\n    flatRows: sortedRowModel.flatRows,\n    rowsById: sortedRowModel.rowsById,\n  }\n}\n","import {\n  Cell,\n  Column,\n  Getter,\n  OnChangeFn,\n  PropGetterValue,\n  ReactTable,\n  Updater,\n} from '../types'\nimport { functionalUpdate, makeStateUpdater, memo, propGetter } from '../utils'\n\nexport type VisibilityOptions = {\n  onColumnVisibilityChange?: OnChangeFn<VisibilityState>\n  enableHiding?: boolean\n}\n\nexport type VisibilityDefaultOptions = {\n  onColumnVisibilityChange: OnChangeFn<VisibilityState>\n}\n\nexport type VisibilityState = Record<string, boolean>\n\nexport type VisibilityTableState = {\n  columnVisibility: VisibilityState\n}\n\nexport type VisibilityInstance<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n> = {\n  getVisibleFlatColumns: () => Column<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getVisibleLeafColumns: () => Column<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  setColumnVisibility: (updater: Updater<VisibilityState>) => void\n  toggleColumnVisibility: (columnId: string, value?: boolean) => void\n  toggleAllColumnsVisible: (value?: boolean) => void\n  getColumnIsVisible: (columId: string) => boolean\n  getColumnCanHide: (columnId: string) => boolean\n  getIsAllColumnsVisible: () => boolean\n  getIsSomeColumnsVisible: () => boolean\n  getToggleAllColumnsVisibilityProps: <\n    TGetter extends Getter<ToggleAllColumnsVisibilityProps>\n  >(\n    userProps?: TGetter\n  ) => undefined | PropGetterValue<ToggleAllColumnsVisibilityProps, TGetter>\n}\n\ntype ToggleVisibilityProps = {}\ntype ToggleAllColumnsVisibilityProps = {}\n\nexport type VisibilityColumnDef = {\n  enableHiding?: boolean\n  defaultCanHide?: boolean\n}\n\nexport type VisibilityRow<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n> = {\n  getVisibleCells: () => Cell<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n}\n\nexport type VisibilityColumn = {\n  getCanHide: () => boolean\n  getIsVisible: () => boolean\n  toggleVisibility: (value?: boolean) => void\n  getToggleVisibilityProps: <TGetter extends Getter<ToggleVisibilityProps>>(\n    userProps?: TGetter\n  ) => PropGetterValue<ToggleVisibilityProps, TGetter>\n}\n\n//\n\nexport function getInitialState(): VisibilityTableState {\n  return {\n    columnVisibility: {},\n  }\n}\n\nexport function getDefaultOptions<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  instance: ReactTable<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n): VisibilityDefaultOptions {\n  return {\n    onColumnVisibilityChange: makeStateUpdater('columnVisibility', instance),\n  }\n}\n\nexport function getDefaultColumn() {\n  return {\n    defaultIsVisible: true,\n  }\n}\n\nexport function createColumn<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  column: Column<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n  instance: ReactTable<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n): VisibilityColumn {\n  return {\n    getCanHide: () => instance.getColumnCanHide(column.id),\n    getIsVisible: () => instance.getColumnIsVisible(column.id),\n    toggleVisibility: value =>\n      instance.toggleColumnVisibility(column.id, value),\n    getToggleVisibilityProps: userProps => {\n      const props: ToggleVisibilityProps = {\n        type: 'checkbox',\n        checked: column.getIsVisible?.(),\n        title: 'Toggle Column Visibility',\n        onChange: (e: MouseEvent | TouchEvent) => {\n          column.toggleVisibility?.((e.target as HTMLInputElement).checked)\n        },\n      }\n\n      return propGetter(props, userProps)\n    },\n  }\n}\n\nexport function getInstance<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  instance: ReactTable<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n): VisibilityInstance<TData, TValue, TFilterFns, TSortingFns, TAggregationFns> {\n  return {\n    getVisibleFlatColumns: memo(\n      () => [\n        instance.getAllFlatColumns(),\n        instance\n          .getAllFlatColumns()\n          .filter(d => d.getIsVisible?.())\n          .map(d => d.id)\n          .join('_'),\n      ],\n      allFlatColumns => {\n        return allFlatColumns.filter(d => d.getIsVisible?.())\n      },\n      'getVisibleFlatColumns',\n      instance.options.debug\n    ),\n\n    getVisibleLeafColumns: memo(\n      () => [\n        instance.getAllLeafColumns(),\n        instance\n          .getAllLeafColumns()\n          .filter(d => d.getIsVisible?.())\n          .map(d => d.id)\n          .join('_'),\n      ],\n      allFlatColumns => {\n        return allFlatColumns.filter(d => d.getIsVisible?.())\n      },\n      'getVisibleLeafColumns',\n      instance.options.debug\n    ),\n\n    setColumnVisibility: updater =>\n      instance.options.onColumnVisibilityChange?.(\n        updater,\n        functionalUpdate(updater, instance.getState().columnVisibility)\n      ),\n\n    toggleColumnVisibility: (columnId, value) => {\n      if (!columnId) return\n\n      if (instance.getColumnCanHide(columnId)) {\n        instance.setColumnVisibility(old => ({\n          ...old,\n          [columnId]: value ?? !instance.getColumnIsVisible(columnId),\n        }))\n      }\n    },\n\n    toggleAllColumnsVisible: value => {\n      value = value ?? !instance.getIsAllColumnsVisible()\n\n      instance.setColumnVisibility(\n        instance.getAllLeafColumns().reduce(\n          (obj, column) => ({\n            ...obj,\n            [column.id]: !value ? !column.getCanHide?.() : value,\n          }),\n          {}\n        )\n      )\n    },\n\n    getColumnIsVisible: columnId => {\n      const column = instance.getColumn(columnId)\n\n      if (!column) {\n        throw new Error()\n      }\n\n      return (\n        instance.getState().columnVisibility?.[columnId] ??\n        column.defaultIsVisible ??\n        true\n      )\n    },\n\n    getColumnCanHide: columnId => {\n      const column = instance.getColumn(columnId)\n\n      if (!column) {\n        throw new Error()\n      }\n\n      return (\n        instance.options.enableHiding ??\n        column.enableHiding ??\n        column.defaultCanHide ??\n        true\n      )\n    },\n\n    getIsAllColumnsVisible: () =>\n      !instance.getAllLeafColumns().some(column => !column.getIsVisible?.()),\n\n    getIsSomeColumnsVisible: () =>\n      instance.getAllLeafColumns().some(column => column.getIsVisible?.()),\n\n    getToggleAllColumnsVisibilityProps: userProps => {\n      const props: ToggleAllColumnsVisibilityProps = {\n        onChange: (e: MouseEvent) => {\n          instance.toggleAllColumnsVisible(\n            (e.target as HTMLInputElement)?.checked\n          )\n        },\n        type: 'checkbox',\n        title: 'Toggle visibility for all columns',\n        checked: instance.getIsAllColumnsVisible(),\n        indeterminate:\n          !instance.getIsAllColumnsVisible() &&\n          instance.getIsSomeColumnsVisible()\n            ? 'indeterminate'\n            : undefined,\n      }\n\n      return propGetter(props, userProps)\n    },\n  }\n}\n","export const aggregationTypes = {\n  sum,\n  min,\n  max,\n  extent,\n  mean,\n  median,\n  unique,\n  uniqueCount,\n  count,\n}\n\nexport type BuiltInAggregationType = keyof typeof aggregationTypes\n\nfunction sum(_leafValues: unknown[], childValues: unknown[]) {\n  // It's faster to just add the aggregations together instead of\n  // process leaf nodes individually\n  return childValues.reduce(\n    (sum: number, next: unknown) => sum + (typeof next === 'number' ? next : 0),\n    0\n  )\n}\n\nfunction min(_leafValues: unknown[], childValues: unknown[]) {\n  let min: number | undefined\n\n  for (const value of childValues as number[]) {\n    if (\n      value != null &&\n      (min! > value || (min === undefined && value >= value))\n    ) {\n      min = value\n    }\n  }\n\n  return min\n}\n\nfunction max(_leafValues: unknown[], childValues: unknown[]) {\n  let max: number | undefined\n\n  for (const value of childValues as number[]) {\n    if (\n      value != null &&\n      (max! < value || (max === undefined && value >= value))\n    ) {\n      max = value\n    }\n  }\n\n  return max\n}\n\nfunction extent(_leafValues: unknown[], childValues: unknown[]) {\n  let min: number | undefined\n  let max: number | undefined\n\n  for (const value of childValues as number[]) {\n    if (value != null) {\n      if (min === undefined) {\n        if (value >= value) min = max = value\n      } else {\n        if (min > value) min = value\n        if (max! < value) max = value\n      }\n    }\n  }\n\n  return [min, max]\n}\n\nfunction mean(leafValues: unknown[]) {\n  let count = 0\n  let sum = 0\n\n  for (let value of leafValues as number[]) {\n    if (value != null && (value = +value) >= value) {\n      ++count, (sum += value)\n    }\n  }\n\n  if (count) return sum / count\n\n  return\n}\n\nfunction median(values: unknown[]) {\n  if (!values.length) {\n    return\n  }\n\n  let min = 0\n  let max = 0\n\n  values.forEach(value => {\n    if (typeof value === 'number') {\n      min = Math.min(min, value)\n      max = Math.max(max, value)\n    }\n  })\n\n  return (min + max) / 2\n}\n\nfunction unique<T>(values: T[]) {\n  return Array.from(new Set(values).values())\n}\n\nfunction uniqueCount(values: unknown[]) {\n  return new Set(values).size\n}\n\nfunction count(values: unknown[]) {\n  return values.length\n}\n","import React, { MouseEvent, TouchEvent } from 'react'\nimport { RowModel } from '..'\nimport { BuiltInAggregationType, aggregationTypes } from '../aggregationTypes'\nimport {\n  Cell,\n  Column,\n  Getter,\n  OnChangeFn,\n  PropGetterValue,\n  ReactTable,\n  Row,\n  Updater,\n} from '../types'\nimport {\n  functionalUpdate,\n  isFunction,\n  makeStateUpdater,\n  memo,\n  propGetter,\n} from '../utils'\n\nexport type GroupingState = string[]\n\nexport type AggregationFn = (leafValues: any[], childValues: any[]) => any\n\nexport type AggregationType<TAggregationFns> =\n  | 'auto'\n  | BuiltInAggregationType\n  | keyof TAggregationFns\n  | AggregationFn\n\nexport type GroupingTableState = {\n  grouping: GroupingState\n}\n\nexport type GroupingColumnDef<TAggregationFns> = {\n  aggregationType?: AggregationType<TAggregationFns>\n  aggregateValue?: (columnValue: unknown) => any\n  renderAggregatedCell?: () => React.ReactNode\n  enableGrouping?: boolean\n  defaultCanGroup?: boolean\n  getCanGroup?: unknown\n}\n\nexport type GroupingColumn<\n  _TData,\n  _TValue,\n  _TFilterFns,\n  _TSortingFns,\n  TAggregationFns\n> = {\n  aggregationType?: AggregationType<TAggregationFns>\n  getCanGroup: () => boolean\n  getIsGrouped: () => boolean\n  getGroupedIndex: () => number\n  toggleGrouping: () => void\n  getToggleGroupingProps: <TGetter extends Getter<ToggleGroupingProps>>(\n    userProps?: TGetter\n  ) => undefined | PropGetterValue<ToggleGroupingProps, TGetter>\n}\n\nexport type GroupingRow = {\n  groupingColumnId?: string\n  groupingValue?: any\n  getIsGrouped: () => boolean\n}\n\nexport type GroupingCell = {\n  getIsGrouped: () => boolean\n  getIsPlaceholder: () => boolean\n  getIsAggregated: () => boolean\n}\n\nexport type ColumnDefaultOptions = {\n  // Column\n  onGroupingChange: OnChangeFn<GroupingState>\n  autoResetGrouping: boolean\n  enableGrouping: boolean\n}\n\nexport type GroupingOptions<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n> = {\n  aggregationTypes?: TAggregationFns\n  onGroupingChange?: OnChangeFn<GroupingState>\n  autoResetGrouping?: boolean\n  enableGrouping?: boolean\n  enableGroupingRemoval?: boolean\n  groupRowsFn?: (\n    instance: ReactTable<\n      TData,\n      TValue,\n      TFilterFns,\n      TSortingFns,\n      TAggregationFns\n    >,\n    groupingState: GroupingState,\n    sortedRowsModel: RowModel<\n      TData,\n      TValue,\n      TFilterFns,\n      TSortingFns,\n      TAggregationFns\n    >\n  ) => RowModel<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n\n  groupedColumnMode?: false | 'reorder' | 'remove'\n}\n\nexport type GroupingColumnMode = false | 'reorder' | 'remove'\n\nexport type ToggleGroupingProps = {\n  title?: string\n  onClick?: (event: MouseEvent | TouchEvent) => void\n}\n\nexport type GroupingInstance<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n> = {\n  getColumnAutoAggregationFn: (columnId: string) => AggregationFn | undefined\n  getColumnAggregationFn: (columnId: string) => AggregationFn | undefined\n  setGrouping: (updater: Updater<GroupingState>) => void\n  resetGrouping: () => void\n  toggleColumnGrouping: (columnId: string) => void\n  getColumnCanGroup: (columnId: string) => boolean\n  getColumnIsGrouped: (columnId: string) => boolean\n  getColumnGroupedIndex: (columnId: string) => number\n  getToggleGroupingProps: <TGetter extends Getter<ToggleGroupingProps>>(\n    columnId: string,\n    userProps?: TGetter\n  ) => undefined | PropGetterValue<ToggleGroupingProps, TGetter>\n  getRowIsGrouped: (rowId: string) => boolean\n  getGroupedRowModel: () => RowModel<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >\n  getPreGroupedRows: () => Row<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getPreGroupedFlatRows: () => Row<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getPreGroupedRowsById: () => Record<\n    string,\n    Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n  >\n  getGroupedRows: () => Row<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getGroupedFlatRows: () => Row<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getGroupedRowsById: () => Record<\n    string,\n    Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n  >\n}\n\n//\n\nexport function getDefaultColumn<TFilterFns>(): GroupingColumnDef<TFilterFns> {\n  return {\n    aggregationType: 'auto',\n  }\n}\n\nexport function getInitialState(): GroupingTableState {\n  return {\n    grouping: [],\n  }\n}\n\nexport function getDefaultOptions<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  instance: ReactTable<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n): GroupingOptions<TData, TValue, TFilterFns, TSortingFns, TAggregationFns> {\n  return {\n    onGroupingChange: makeStateUpdater('grouping', instance),\n    autoResetGrouping: true,\n    groupedColumnMode: 'reorder',\n  }\n}\n\nexport function createColumn<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  column: Column<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n  instance: ReactTable<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n): GroupingColumn<TData, TValue, TFilterFns, TSortingFns, TAggregationFns> {\n  return {\n    aggregationType: column.aggregationType,\n    getCanGroup: () => instance.getColumnCanGroup(column.id),\n    getGroupedIndex: () => instance.getColumnGroupedIndex(column.id),\n    getIsGrouped: () => instance.getColumnIsGrouped(column.id),\n    toggleGrouping: () => instance.toggleColumnGrouping(column.id),\n    getToggleGroupingProps: userProps =>\n      instance.getToggleGroupingProps(column.id, userProps),\n  }\n}\n\nexport function getInstance<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  instance: ReactTable<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n): GroupingInstance<TData, TValue, TFilterFns, TSortingFns, TAggregationFns> {\n  return {\n    getColumnAutoAggregationFn: columnId => {\n      const firstRow = instance.getCoreFlatRows()[0]\n\n      const value = firstRow?.values[columnId]\n\n      if (typeof value === 'number') {\n        return aggregationTypes.sum\n      }\n\n      if (Object.prototype.toString.call(value) === '[object Date]') {\n        return aggregationTypes.extent\n      }\n\n      return aggregationTypes.count\n    },\n    getColumnAggregationFn: columnId => {\n      const column = instance.getColumn(columnId)\n      const userAggregationTypes = instance.options.aggregationTypes\n\n      if (!column) {\n        throw new Error()\n      }\n\n      return isFunction(column.aggregationType)\n        ? column.aggregationType\n        : column.aggregationType === 'auto'\n        ? instance.getColumnAutoFilterFn(columnId)\n        : (userAggregationTypes as Record<string, any>)?.[\n            column.aggregationType as string\n          ] ??\n          (aggregationTypes[\n            column.aggregationType as BuiltInAggregationType\n          ] as AggregationFn)\n    },\n\n    setGrouping: updater =>\n      instance.options.onGroupingChange?.(\n        updater,\n        functionalUpdate(updater, instance.getState().grouping)\n      ),\n\n    toggleColumnGrouping: columnId => {\n      instance.setGrouping(old => {\n        // Find any existing grouping for this column\n        if (old?.includes(columnId)) {\n          return old.filter(d => d !== columnId)\n        }\n\n        return [...(old ?? []), columnId]\n      })\n    },\n\n    getColumnCanGroup: columnId => {\n      const column = instance.getColumn(columnId)\n\n      if (!column) {\n        throw new Error()\n      }\n\n      return (\n        column.enableGrouping ??\n        instance.options.enableGrouping ??\n        column.defaultCanGroup ??\n        !!column.accessorFn\n      )\n    },\n\n    getColumnIsGrouped: columnId => {\n      return instance.getState().grouping?.includes(columnId)\n    },\n\n    getColumnGroupedIndex: columnId =>\n      instance.getState().grouping?.indexOf(columnId),\n\n    resetGrouping: () => {\n      instance.setGrouping(instance.options?.initialState?.grouping ?? [])\n    },\n\n    getToggleGroupingProps: (columnId, userProps) => {\n      const column = instance.getColumn(columnId)\n\n      if (!column) {\n        return\n      }\n\n      const canGroup = column.getCanGroup()\n\n      const initialProps: ToggleGroupingProps = {\n        title: canGroup ? 'Toggle Grouping' : undefined,\n        onClick: canGroup\n          ? (e: MouseEvent | TouchEvent) => {\n              e.persist()\n              column.toggleGrouping?.()\n            }\n          : undefined,\n      }\n\n      return propGetter(initialProps, userProps)\n    },\n\n    getRowIsGrouped: rowId => !!instance.getRow(rowId)?.groupingColumnId,\n\n    getGroupedRowModel: memo(\n      () => [\n        instance.getState().grouping,\n        instance.getSortedRowModel(),\n        instance.options.groupRowsFn,\n      ],\n      (grouping, rowModel, groupRowsFn) => {\n        if (!groupRowsFn || !grouping.length) {\n          return rowModel\n        }\n\n        if (process.env.NODE_ENV !== 'production' && instance.options.debug)\n          console.info('Grouping...')\n\n        return groupRowsFn(instance, grouping, rowModel)\n      },\n      'getGroupedRowModel',\n      instance.options.debug\n    ),\n\n    getPreGroupedRows: () => instance.getSortedRowModel().rows,\n    getPreGroupedFlatRows: () => instance.getSortedRowModel().flatRows,\n    getPreGroupedRowsById: () => instance.getSortedRowModel().rowsById,\n    getGroupedRows: () => instance.getGroupedRowModel().rows,\n    getGroupedFlatRows: () => instance.getGroupedRowModel().flatRows,\n    getGroupedRowsById: () => instance.getGroupedRowModel().rowsById,\n  }\n}\n\nexport function createRow<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  row: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n  instance: ReactTable<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n): GroupingRow {\n  return {\n    getIsGrouped: () => instance.getRowIsGrouped(row.id),\n  }\n}\n\nexport function createCell<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  cell: Cell<TData, TValue, TFilterFns, TSortingFns, TAggregationFns> &\n    GroupingCell,\n  column: Column<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n  row: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n  _instance: ReactTable<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n): GroupingCell {\n  return {\n    getIsGrouped: () =>\n      column.getIsGrouped() && column.id === row.groupingColumnId,\n    getIsPlaceholder: () => !cell.getIsGrouped() && column.getIsGrouped(),\n    getIsAggregated: () =>\n      !cell.getIsGrouped() &&\n      !cell.getIsPlaceholder() &&\n      row.subRows?.length > 1,\n  }\n}\n\nexport function orderColumns<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  leafColumns: Column<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[],\n  grouping: string[],\n  groupedColumnMode?: GroupingColumnMode\n) {\n  if (!grouping?.length || !groupedColumnMode) {\n    return leafColumns\n  }\n\n  const nonGroupingColumns = leafColumns.filter(\n    col => !grouping.includes(col.id)\n  )\n\n  if (groupedColumnMode === 'remove') {\n    return nonGroupingColumns\n  }\n\n  const groupingColumns = grouping\n    .map(g => leafColumns.find(col => col.id === g)!)\n    .filter(Boolean)\n\n  return [...groupingColumns, ...nonGroupingColumns]\n}\n","import { functionalUpdate, makeStateUpdater, memo } from '../utils'\n\nimport { ReactTable, OnChangeFn, Updater, Column } from '../types'\n\nimport * as Grouping from './Grouping'\n\nexport type ColumnOrderState = string[]\n\nexport type ColumnOrderTableState = {\n  columnOrder: string[]\n}\n\nexport type ColumnOrderOptions = {\n  onColumnOrderChange?: OnChangeFn<ColumnOrderState>\n}\n\nexport type ColumnOrderDefaultOptions = {\n  onColumnOrderChange: OnChangeFn<ColumnOrderState>\n}\n\nexport type ColumnOrderInstance<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n> = {\n  setColumnOrder: (updater: Updater<ColumnOrderState>) => void\n  resetColumnOrder: () => void\n  getOrderColumnsFn: () => (\n    columns: Column<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>[]\n  ) => Column<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>[]\n}\n\n//\n\nexport function getInitialState(): ColumnOrderTableState {\n  return {\n    columnOrder: [],\n  }\n}\n\nexport function getDefaultOptions<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  instance: ReactTable<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n): ColumnOrderDefaultOptions {\n  return {\n    onColumnOrderChange: makeStateUpdater('columnOrder', instance),\n  }\n}\n\nexport function getInstance<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  instance: ReactTable<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n): ColumnOrderInstance<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n> {\n  return {\n    setColumnOrder: updater =>\n      instance.options.onColumnOrderChange?.(\n        updater,\n        functionalUpdate(updater, instance.getState().columnOrder)\n      ),\n    resetColumnOrder: () => {\n      instance.setColumnOrder(instance.initialState.columnOrder ?? [])\n    },\n    getOrderColumnsFn: memo(\n      () => [\n        instance.getState().columnOrder,\n        instance.getState().grouping,\n        instance.options.groupedColumnMode,\n      ],\n      (columnOrder, grouping, groupedColumnMode) => columns => {\n        // Sort grouped columns to the start of the column list\n        // before the headers are built\n        let orderedColumns: Column<\n          TData,\n          TValue,\n          TFilterFns,\n          TSortingFns,\n          TAggregationFns\n        >[] = []\n\n        // If there is no order, return the normal columns\n        if (!columnOrder?.length) {\n          orderedColumns = columns\n        } else {\n          const columnOrderCopy = [...columnOrder]\n\n          // If there is an order, make a copy of the columns\n          const columnsCopy = [...columns]\n\n          // And make a new ordered array of the columns\n\n          // Loop over the columns and place them in order into the new array\n          while (columnsCopy.length && columnOrderCopy.length) {\n            const targetColumnId = columnOrderCopy.shift()\n            const foundIndex = columnsCopy.findIndex(\n              d => d.id === targetColumnId\n            )\n            if (foundIndex > -1) {\n              orderedColumns.push(columnsCopy.splice(foundIndex, 1)[0]!)\n            }\n          }\n\n          // If there are any columns left, add them to the end\n          orderedColumns = [...orderedColumns, ...columnsCopy]\n        }\n\n        return Grouping.orderColumns(\n          orderedColumns,\n          grouping,\n          groupedColumnMode\n        )\n      },\n      'getOrderColumnsFn',\n      instance.options.debug\n    ),\n  }\n}\n","import { OnChangeFn, Updater, ReactTable, Column } from '../types'\nimport { functionalUpdate, makeStateUpdater } from '../utils'\n\ntype ColumnPinningPosition = 'left' | 'right' | 'both'\n\nexport type ColumnPinningState = {\n  left?: string[]\n  right?: string[]\n}\n\nexport type ColumnPinningTableState = {\n  columnPinning: ColumnPinningState\n}\n\nexport type ColumnPinningOptions = {\n  onColumnPinningChange?: OnChangeFn<ColumnPinningState>\n  enablePinning?: boolean\n}\n\nexport type ColumnPinningDefaultOptions = {\n  onColumnPinningChange: OnChangeFn<ColumnPinningState>\n}\n\nexport type ColumnPinningColumnDef = {\n  enablePinning?: boolean\n  defaultCanPin?: boolean\n}\n\nexport type ColumnPinningColumn = {\n  getCanPin: () => boolean\n  getPinnedIndex: () => number\n  getIsPinned: () => false | ColumnPinningPosition\n  pin: (position: ColumnPinningPosition) => void\n}\n\nexport type ColumnPinningInstance<\n  _TData,\n  _TValue,\n  _TFilterFns,\n  _TSortingFns,\n  _TAggregationFns\n> = {\n  setColumnPinning: (updater: Updater<ColumnPinningState>) => void\n  resetColumnPinning: () => void\n  pinColumn: (columnId: string, position: ColumnPinningPosition) => void\n  getColumnCanPin: (columnId: string) => boolean\n  getColumnIsPinned: (columnId: string) => false | ColumnPinningPosition\n  getColumnPinnedIndex: (columnId: string) => number\n}\n\n//\n\nexport function getInitialState(): ColumnPinningTableState {\n  return {\n    columnPinning: {\n      left: [],\n      right: [],\n    },\n  }\n}\n\nexport function getDefaultOptions<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  instance: ReactTable<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n): ColumnPinningDefaultOptions {\n  return {\n    onColumnPinningChange: makeStateUpdater('columnPinning', instance),\n  }\n}\n\nexport function createColumn<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  column: Column<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n  instance: ReactTable<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n): ColumnPinningColumn {\n  return {\n    getCanPin: () => instance.getColumnCanPin(column.id),\n    getPinnedIndex: () => instance.getColumnPinnedIndex(column.id),\n    getIsPinned: () => instance.getColumnIsPinned(column.id),\n    pin: position => instance.pinColumn(column.id, position),\n  }\n}\n\nexport function getInstance<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  instance: ReactTable<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n): ColumnPinningInstance<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n> {\n  return {\n    setColumnPinning: updater =>\n      instance.options.onColumnPinningChange?.(\n        updater,\n        functionalUpdate(updater, instance.getState().columnPinning)\n      ),\n\n    resetColumnPinning: () =>\n      instance.setColumnPinning(\n        instance.options.initialState?.columnPinning ?? {}\n      ),\n\n    pinColumn: (columnId, position) => {\n      const column = instance.getColumn(columnId)\n\n      const columnIds = column\n        ?.getLeafColumns()\n        .map(d => d.id)\n        .filter(Boolean) as string[]\n\n      instance.setColumnPinning(old => {\n        if (position === 'right') {\n          return {\n            left: (old?.left ?? []).filter(d => !columnIds?.includes(d)),\n            right: [\n              ...(old?.right ?? []).filter(d => !columnIds?.includes(d)),\n              ...columnIds,\n            ],\n          }\n        }\n\n        if (position === 'left') {\n          return {\n            left: [\n              ...(old?.left ?? []).filter(d => !columnIds?.includes(d)),\n              ...columnIds,\n            ],\n            right: (old?.right ?? []).filter(d => !columnIds?.includes(d)),\n          }\n        }\n\n        return {\n          left: (old?.left ?? []).filter(d => !columnIds?.includes(d)),\n          right: (old?.right ?? []).filter(d => !columnIds?.includes(d)),\n        }\n      })\n    },\n\n    getColumnCanPin: columnId => {\n      const column = instance.getColumn(columnId)\n\n      if (!column) {\n        throw new Error()\n      }\n\n      const leafColumns = column.getLeafColumns()\n\n      return leafColumns.some(\n        d =>\n          d.enablePinning ??\n          instance.options.enablePinning ??\n          d.defaultCanPin ??\n          !!d.accessorFn\n      )\n    },\n\n    getColumnIsPinned: columnId => {\n      const column = instance.getColumn(columnId)\n\n      if (!column) {\n        throw new Error()\n      }\n\n      const leafColumnIds = column.getLeafColumns().map(d => d.id)\n\n      const { left, right } = instance.getState().columnPinning\n\n      const isLeft = leafColumnIds.some(d => left?.includes(d))\n      const isRight = leafColumnIds.some(d => right?.includes(d))\n\n      if (isLeft && isRight) {\n        return 'both'\n      }\n\n      return isLeft ? 'left' : isRight ? 'right' : false\n    },\n\n    getColumnPinnedIndex: columnId => {\n      const position = instance.getColumnIsPinned(columnId)\n\n      if (position === 'both') {\n        if (process.env.NODE_ENV !== 'production') {\n          console.warn(\n            `Column ${columnId} has leaf columns that are pinned on both sides`\n          )\n        }\n        throw new Error()\n      }\n\n      return position\n        ? instance.getState().columnPinning?.[position]?.indexOf(columnId) ?? -1\n        : 0\n    },\n  }\n}\n","import {\n  Cell,\n  Column,\n  FooterGroupProps,\n  FooterProps,\n  Getter,\n  Header,\n  HeaderGroup,\n  HeaderGroupProps,\n  HeaderProps,\n  PropGetterValue,\n  ReactTable,\n  Row,\n} from '../types'\nimport { propGetter, memo, flexRender } from '../utils'\n\nexport type HeadersRow<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n> = {\n  _getAllVisibleCells: () => Cell<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getVisibleCells: () => Cell<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getLeftVisibleCells: () => Cell<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getCenterVisibleCells: () => Cell<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getRightVisibleCells: () => Cell<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n}\n\nexport type HeadersInstance<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n> = {\n  createHeader: (\n    column: Column<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n    options: {\n      id?: string\n      isPlaceholder?: boolean\n      placeholderId?: string\n      depth: number\n    }\n  ) => Header<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n  getHeaderGroups: () => HeaderGroup<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getLeftHeaderGroups: () => HeaderGroup<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getCenterHeaderGroups: () => HeaderGroup<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getRightHeaderGroups: () => HeaderGroup<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n\n  getFooterGroups: () => HeaderGroup<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getCenterFooterGroups: () => HeaderGroup<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getLeftFooterGroups: () => HeaderGroup<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getRightFooterGroups: () => HeaderGroup<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n\n  getFlatHeaders: () => Header<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getLeftFlatHeaders: () => Header<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getCenterFlatHeaders: () => Header<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getRightFlatHeaders: () => Header<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n\n  getLeafHeaders: () => Header<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getLeftLeafHeaders: () => Header<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getCenterLeafHeaders: () => Header<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getRightLeafHeaders: () => Header<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n\n  getHeader: (\n    id: string\n  ) => Header<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n\n  getHeaderGroupProps: <TGetter extends Getter<HeaderGroupProps>>(\n    id: string,\n    userProps?: TGetter\n  ) => undefined | PropGetterValue<HeaderGroupProps, TGetter>\n  getFooterGroupProps: <TGetter extends Getter<FooterGroupProps>>(\n    id: string,\n    userProps?: TGetter\n  ) => undefined | PropGetterValue<FooterGroupProps, TGetter>\n  getHeaderProps: <TGetter extends Getter<HeaderProps>>(\n    headerId: string,\n    userProps?: TGetter\n  ) => undefined | PropGetterValue<HeaderProps, TGetter>\n  getFooterProps: <TGetter extends Getter<FooterProps>>(\n    headerId: string,\n    userProps?: TGetter\n  ) => undefined | PropGetterValue<FooterProps, TGetter>\n  getTotalWidth: () => number\n}\n\n//\n\nexport function createRow<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  row: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n  instance: ReactTable<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n): HeadersRow<TData, TValue, TFilterFns, TSortingFns, TAggregationFns> {\n  return {\n    _getAllVisibleCells: memo(\n      () => [\n        row\n          .getAllCells()\n          .filter(cell => cell.column.getIsVisible())\n          .map(d => d.id)\n          .join('_'),\n      ],\n      _ => {\n        return row.getAllCells().filter(cell => cell.column.getIsVisible())\n      },\n      'row._getAllVisibleCells',\n      instance.options.debug\n    ),\n    getVisibleCells: memo(\n      () => [\n        row.getLeftVisibleCells(),\n        row.getCenterVisibleCells(),\n        row.getRightVisibleCells(),\n      ],\n      (left, center, right) => [...left, ...center, ...right],\n      'row.getVisibleCells',\n      instance.options.debug\n    ),\n    getCenterVisibleCells: memo(\n      () => [\n        row._getAllVisibleCells(),\n        instance.getState().columnPinning.left,\n        instance.getState().columnPinning.right,\n      ],\n      (allCells, left, right) => {\n        const leftAndRight = [...(left ?? []), ...(right ?? [])]\n\n        return allCells.filter(d => !leftAndRight.includes(d.columnId))\n      },\n      'row.getCenterVisibleCells',\n      instance.options.debug\n    ),\n    getLeftVisibleCells: memo(\n      () => [\n        row._getAllVisibleCells(),\n        instance.getState().columnPinning.left,\n        ,\n      ],\n      (allCells, left) => {\n        const cells = (left ?? [])\n          .map(columnId => allCells.find(cell => cell.columnId === columnId)!)\n          .filter(Boolean)\n\n        return cells\n      },\n      'row.getLeftVisibleCells',\n      instance.options.debug\n    ),\n    getRightVisibleCells: memo(\n      () => [\n        row._getAllVisibleCells(),\n        instance.getState().columnPinning.right,\n      ],\n      (allCells, right) => {\n        const cells = (right ?? [])\n          .map(columnId => allCells.find(cell => cell.columnId === columnId)!)\n          .filter(Boolean)\n\n        return cells\n      },\n      'row.getRightVisibleCells',\n      instance.options.debug\n    ),\n  }\n}\n\nexport function getInstance<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  instance: ReactTable<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n): HeadersInstance<TData, TValue, TFilterFns, TSortingFns, TAggregationFns> {\n  return {\n    createHeader: (\n      column: Column<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n      options: {\n        id?: string\n        isPlaceholder?: boolean\n        placeholderId?: string\n        depth: number\n      }\n    ) => {\n      const id = options.id ?? column.id\n\n      let header: Header<\n        TData,\n        TValue,\n        TFilterFns,\n        TSortingFns,\n        TAggregationFns\n      > = {\n        id,\n        column,\n        isPlaceholder: options.isPlaceholder,\n        placeholderId: options.placeholderId,\n        depth: options.depth,\n        subHeaders: [],\n        colSpan: 0,\n        rowSpan: 0,\n        getWidth: () => {\n          let sum = 0\n\n          const recurse = (\n            header: Header<\n              TData,\n              TValue,\n              TFilterFns,\n              TSortingFns,\n              TAggregationFns\n            >\n          ) => {\n            if (header.subHeaders.length) {\n              header.subHeaders.forEach(recurse)\n            } else {\n              sum += header.column.getWidth() ?? 0\n            }\n          }\n\n          recurse(header)\n\n          return sum\n        },\n        getLeafHeaders: (): Header<\n          TData,\n          TValue,\n          TFilterFns,\n          TSortingFns,\n          TAggregationFns\n        >[] => {\n          const leafHeaders: Header<\n            TData,\n            TValue,\n            TFilterFns,\n            TSortingFns,\n            TAggregationFns\n          >[] = []\n\n          const recurseHeader = (\n            h: Header<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n          ) => {\n            if (h.subHeaders && h.subHeaders.length) {\n              h.subHeaders.map(recurseHeader)\n            }\n            leafHeaders.push(h)\n          }\n\n          recurseHeader(header)\n          return leafHeaders\n        },\n        getHeaderProps: userProps =>\n          instance.getHeaderProps(header.id, userProps)!,\n        getFooterProps: userProps =>\n          instance.getFooterProps(header.id, userProps)!,\n        renderHeader: () => flexRender(column.header, { header, column }),\n        renderFooter: () => flexRender(column.footer, { header, column }),\n      }\n\n      return header\n    },\n\n    // Header Groups\n\n    getHeaderGroups: memo(\n      () => [\n        instance.getAllColumns(),\n        instance.getVisibleLeafColumns(),\n        instance.getState().columnPinning.left,\n        instance.getState().columnPinning.right,\n      ],\n      (allColumns, leafColumns, left, right) => {\n        const leftColumns = leafColumns.filter(column =>\n          left?.includes(column.id)\n        )\n        const rightColumns = leafColumns.filter(column =>\n          right?.includes(column.id)\n        )\n        const centerColumns = leafColumns.filter(\n          column => !left?.includes(column.id) && !right?.includes(column.id)\n        )\n        const headerGroups = buildHeaderGroups(\n          allColumns,\n          [...leftColumns, ...centerColumns, ...rightColumns],\n          instance\n        )\n\n        return headerGroups\n      },\n      'getHeaderGroups',\n      instance.options.debug\n    ),\n\n    getCenterHeaderGroups: memo(\n      () => [\n        instance.getAllColumns(),\n        instance.getVisibleLeafColumns(),\n        instance.getState().columnPinning.left,\n        instance.getState().columnPinning.right,\n      ],\n      (allColumns, leafColumns, left, right) => {\n        leafColumns = leafColumns.filter(\n          column => !left?.includes(column.id) && !right?.includes(column.id)\n        )\n        return buildHeaderGroups(allColumns, leafColumns, instance, 'center')\n      },\n      'getCenterHeaderGroups',\n      instance.options.debug\n    ),\n\n    getLeftHeaderGroups: memo(\n      () => [\n        instance.getAllColumns(),\n        instance.getVisibleLeafColumns(),\n        instance.getState().columnPinning.left,\n      ],\n      (allColumns, leafColumns, left) => {\n        leafColumns = leafColumns.filter(column => left?.includes(column.id))\n        return buildHeaderGroups(allColumns, leafColumns, instance, 'left')\n      },\n      'getLeftHeaderGroups',\n      instance.options.debug\n    ),\n\n    getRightHeaderGroups: memo(\n      () => [\n        instance.getAllColumns(),\n        instance.getVisibleLeafColumns(),\n        instance.getState().columnPinning.right,\n      ],\n      (allColumns, leafColumns, right) => {\n        leafColumns = leafColumns.filter(column => right?.includes(column.id))\n        return buildHeaderGroups(allColumns, leafColumns, instance, 'right')\n      },\n      'getRightHeaderGroups',\n      instance.options.debug\n    ),\n\n    // Footer Groups\n\n    getFooterGroups: memo(\n      () => [instance.getHeaderGroups()],\n      headerGroups => {\n        return [...headerGroups].reverse()\n      },\n      'getFooterGroups',\n      instance.options.debug\n    ),\n\n    getLeftFooterGroups: memo(\n      () => [instance.getLeftHeaderGroups()],\n      headerGroups => {\n        return [...headerGroups].reverse()\n      },\n      'getLeftFooterGroups',\n      instance.options.debug\n    ),\n\n    getCenterFooterGroups: memo(\n      () => [instance.getCenterHeaderGroups()],\n      headerGroups => {\n        return [...headerGroups].reverse()\n      },\n      'getCenterFooterGroups',\n      instance.options.debug\n    ),\n\n    getRightFooterGroups: memo(\n      () => [instance.getRightHeaderGroups()],\n      headerGroups => {\n        return [...headerGroups].reverse()\n      },\n      'getRightFooterGroups',\n      instance.options.debug\n    ),\n\n    // Flat Headers\n\n    getFlatHeaders: memo(\n      () => [instance.getHeaderGroups()],\n      headerGroups => {\n        return headerGroups\n          .map(headerGroup => {\n            return headerGroup.headers\n          })\n          .flat()\n      },\n      'getFlatHeaders',\n      instance.options.debug\n    ),\n\n    getLeftFlatHeaders: memo(\n      () => [instance.getLeftHeaderGroups()],\n      left => {\n        return left\n          .map(headerGroup => {\n            return headerGroup.headers\n          })\n          .flat()\n      },\n      'getLeftFlatHeaders',\n      instance.options.debug\n    ),\n\n    getCenterFlatHeaders: memo(\n      () => [instance.getCenterHeaderGroups()],\n      left => {\n        return left\n          .map(headerGroup => {\n            return headerGroup.headers\n          })\n          .flat()\n      },\n      'getCenterFlatHeaders',\n      instance.options.debug\n    ),\n\n    getRightFlatHeaders: memo(\n      () => [instance.getRightHeaderGroups()],\n      left => {\n        return left\n          .map(headerGroup => {\n            return headerGroup.headers\n          })\n          .flat()\n      },\n      'getRightFlatHeaders',\n      instance.options.debug\n    ),\n\n    // Leaf Headers\n\n    getCenterLeafHeaders: memo(\n      () => [instance.getCenterFlatHeaders()],\n      flatHeaders => {\n        return flatHeaders.filter(header => !header.subHeaders?.length)\n      },\n      'getCenterLeafHeaders',\n      instance.options.debug\n    ),\n\n    getLeftLeafHeaders: memo(\n      () => [instance.getLeftFlatHeaders()],\n      flatHeaders => {\n        return flatHeaders.filter(header => !header.subHeaders?.length)\n      },\n      'getLeftLeafHeaders',\n      instance.options.debug\n    ),\n\n    getRightLeafHeaders: memo(\n      () => [instance.getRightFlatHeaders()],\n      flatHeaders => {\n        return flatHeaders.filter(header => !header.subHeaders?.length)\n      },\n      'getRightLeafHeaders',\n      instance.options.debug\n    ),\n\n    getLeafHeaders: memo(\n      () => [\n        instance.getLeftHeaderGroups(),\n        instance.getCenterHeaderGroups(),\n        instance.getRightHeaderGroups(),\n      ],\n      (left, center, right) => {\n        return [\n          ...(left[0]?.headers ?? []),\n          ...(center[0]?.headers ?? []),\n          ...(right[0]?.headers ?? []),\n        ]\n          .map(header => {\n            return header.getLeafHeaders()\n          })\n          .flat()\n      },\n      'getLeafHeaders',\n      instance.options.debug\n    ),\n\n    getHeader: (id: string) => {\n      const header = [\n        ...instance.getFlatHeaders(),\n        ...instance.getCenterFlatHeaders(),\n        ...instance.getLeftFlatHeaders(),\n        ...instance.getRightFlatHeaders(),\n      ].find(d => d.id === id)\n\n      if (!header) {\n        if (process.env.NODE_ENV !== 'production') {\n          console.warn(`Could not find header with id: ${id}`)\n        }\n        throw new Error()\n      }\n\n      return header\n    },\n\n    getHeaderGroupProps: (id, userProps) => {\n      const headerGroup = instance.getHeaderGroups().find(d => d.id === id)\n\n      if (!headerGroup) {\n        return\n      }\n\n      return propGetter(\n        {\n          key: headerGroup.id,\n          role: 'row',\n        },\n        userProps\n      )\n    },\n\n    getFooterGroupProps: (id, userProps) => {\n      const headerGroup = instance.getFooterGroups().find(d => d.id === id)\n\n      if (!headerGroup) {\n        return\n      }\n\n      const initialProps = {\n        key: headerGroup.id,\n        role: 'row',\n      }\n\n      return propGetter(initialProps, userProps)\n    },\n\n    getHeaderProps: (id, userProps) => {\n      const header = instance.getHeader(id)\n\n      if (!header) {\n        throw new Error()\n      }\n\n      const initialProps: HeaderProps = {\n        key: header.id,\n        role: 'columnheader',\n        colSpan: header.colSpan,\n        rowSpan: header.rowSpan,\n      }\n\n      return propGetter(initialProps, userProps)\n    },\n\n    getFooterProps: (id, userProps) => {\n      const header = instance.getHeader(id)\n      if (!header) {\n        return\n      }\n\n      const initialProps: FooterProps = {\n        key: header.id,\n        role: 'columnfooter',\n        colSpan: header.colSpan,\n        rowSpan: header.rowSpan,\n      }\n\n      return propGetter(initialProps, userProps)\n    },\n\n    getTotalWidth: () => {\n      let width = 0\n\n      instance.getVisibleLeafColumns().forEach(column => {\n        width += column.getWidth() ?? 0\n      })\n\n      return width\n    },\n  }\n}\n\nexport function buildHeaderGroups<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  allColumns: Column<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>[],\n  columnsToGroup: Column<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[],\n  instance: ReactTable<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n  headerFamily?: 'center' | 'left' | 'right'\n) {\n  // Find the max depth of the columns:\n  // build the leaf column row\n  // build each buffer row going up\n  //    placeholder for non-existent level\n  //    real column for existing level\n\n  let maxDepth = 0\n\n  const findMaxDepth = (\n    columns: Column<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>[],\n    depth = 1\n  ) => {\n    maxDepth = Math.max(maxDepth, depth)\n\n    columns\n      .filter(column => column.getIsVisible())\n      .forEach(column => {\n        if (column.columns?.length) {\n          findMaxDepth(column.columns, depth + 1)\n        }\n      }, 0)\n  }\n\n  findMaxDepth(allColumns)\n\n  let headerGroups: HeaderGroup<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[] = []\n\n  const createHeaderGroup = (\n    headersToGroup: Header<\n      TData,\n      TValue,\n      TFilterFns,\n      TSortingFns,\n      TAggregationFns\n    >[],\n    depth: number\n  ) => {\n    // The header group we are creating\n    const headerGroup: HeaderGroup<\n      TData,\n      TValue,\n      TFilterFns,\n      TSortingFns,\n      TAggregationFns\n    > = {\n      depth,\n      id: [headerFamily, `${depth}`].filter(Boolean).join('_'),\n      headers: [],\n      getHeaderGroupProps: getterValue =>\n        instance.getHeaderGroupProps(`${depth}`, getterValue)!,\n      getFooterGroupProps: getterValue =>\n        instance.getFooterGroupProps(`${depth}`, getterValue)!,\n    }\n\n    // The parent columns we're going to scan next\n    const parentHeaders: Header<\n      TData,\n      TValue,\n      TFilterFns,\n      TSortingFns,\n      TAggregationFns\n    >[] = []\n\n    // Scan each column for parents\n    headersToGroup.forEach(headerToGroup => {\n      // What is the latest (last) parent column?\n\n      const latestParentHeader = [...parentHeaders].reverse()[0]\n\n      const isLeafHeader = headerToGroup.column.depth === headerGroup.depth\n\n      let column: Column<\n        TData,\n        TValue,\n        TFilterFns,\n        TSortingFns,\n        TAggregationFns\n      >\n      let isPlaceholder = false\n\n      if (isLeafHeader && headerToGroup.column.parent) {\n        // The parent header is new\n        column = headerToGroup.column.parent\n      } else {\n        // The parent header is repeated\n        column = headerToGroup.column\n        isPlaceholder = true\n      }\n\n      const header = instance.createHeader(column, {\n        id: [headerFamily, depth, column.id, headerToGroup?.id]\n          .filter(Boolean)\n          .join('_'),\n        isPlaceholder,\n        placeholderId: isPlaceholder\n          ? `${parentHeaders.filter(d => d.column === column).length}`\n          : undefined,\n        depth,\n      })\n\n      if (!latestParentHeader || latestParentHeader.column !== header.column) {\n        header.subHeaders.push(headerToGroup)\n        parentHeaders.push(header)\n      } else {\n        latestParentHeader.subHeaders.push(headerToGroup)\n      }\n\n      // if (!headerToGroup.isPlaceholder) {\n      //   headerToGroup.column.header = headerToGroup;\n      // }\n\n      headerGroup.headers.push(headerToGroup)\n    })\n\n    headerGroups.push(headerGroup)\n\n    if (depth > 0) {\n      createHeaderGroup(parentHeaders, depth - 1)\n    }\n  }\n\n  const bottomHeaders = columnsToGroup.map(column =>\n    instance.createHeader(column, {\n      depth: maxDepth,\n    })\n  )\n\n  createHeaderGroup(bottomHeaders, maxDepth - 1)\n\n  headerGroups.reverse()\n\n  // headerGroups = headerGroups.filter(headerGroup => {\n  //   return !headerGroup.headers.every(header => header.isPlaceholder)\n  // })\n\n  const recurseHeadersForSpans = (\n    headers: Header<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>[]\n  ) => {\n    const filteredHeaders = headers.filter(header =>\n      header.column.getIsVisible()\n    )\n\n    return filteredHeaders.map(header => {\n      let colSpan = 0\n      let rowSpan = 0\n      let childRowSpans = [0]\n\n      if (header.subHeaders && header.subHeaders.length) {\n        childRowSpans = []\n\n        recurseHeadersForSpans(header.subHeaders).forEach(\n          ({ colSpan: childColSpan, rowSpan: childRowSpan }) => {\n            colSpan += childColSpan\n            childRowSpans.push(childRowSpan)\n          }\n        )\n      } else {\n        colSpan = 1\n      }\n\n      const minChildRowSpan = Math.min(...childRowSpans)\n      rowSpan = rowSpan + minChildRowSpan\n\n      header.colSpan = colSpan > 0 ? colSpan : undefined\n      header.rowSpan = rowSpan > 0 ? rowSpan : undefined\n\n      return { colSpan, rowSpan }\n    })\n  }\n\n  recurseHeadersForSpans(headerGroups[0]?.headers ?? [])\n\n  return headerGroups\n}\n","import { AccessorFn, Row } from './types'\n\nexport const filterTypes = {\n  includesString,\n  includesStringSensitive,\n  equalsString,\n  equalsStringSensitive,\n  arrIncludes,\n  arrIncludesAll,\n  equals,\n  weakEquals,\n  betweenNumberRange,\n}\n\nexport type BuiltInFilterType = keyof typeof filterTypes\n\nfunction includesString<\n  TData,\n  TValue,\n  TAccessor extends AccessorFn<TData>,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  rows: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>[],\n  columnIds: string[],\n  filterValue: unknown\n) {\n  const search = String(filterValue).toLowerCase()\n\n  rows = rows.filter(row => {\n    return columnIds.some(id => {\n      return String(row.values[id]).toLowerCase().includes(search)\n    })\n  })\n  return rows\n}\n\nincludesString.autoRemove = (val: any) => testFalsey(val)\n\nfunction includesStringSensitive<\n  TData,\n  TValue,\n  TAccessor extends AccessorFn<TData>,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  rows: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>[],\n  columnIds: string[],\n  filterValue: unknown\n) {\n  const search = String(filterValue)\n\n  rows = rows.filter(row => {\n    return columnIds.some(id => {\n      return String(row.values[id]).includes(search)\n    })\n  })\n  return rows\n}\n\nincludesStringSensitive.autoRemove = (val: any) => testFalsey(val)\n\nfunction equalsString<\n  TData,\n  TValue,\n  TAccessor extends AccessorFn<TData>,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  rows: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>[],\n  columnIds: string[],\n  filterValue: unknown\n) {\n  const search = String(filterValue).toLowerCase()\n\n  return rows.filter(row => {\n    return columnIds.some(id => {\n      const rowValue = row.values[id]\n      return rowValue !== undefined\n        ? String(rowValue).toLowerCase() === search\n        : true\n    })\n  })\n}\n\nequalsString.autoRemove = (val: any) => testFalsey(val)\n\nfunction equalsStringSensitive<\n  TData,\n  TValue,\n  TAccessor extends AccessorFn<TData>,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  rows: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>[],\n  columnIds: string[],\n  filterValue: unknown\n) {\n  const search = String(filterValue)\n  return rows.filter(row => {\n    return columnIds.some(id => {\n      const rowValue = row.values[id]\n      return rowValue !== undefined ? String(rowValue) === search : true\n    })\n  })\n}\n\nequalsStringSensitive.autoRemove = (val: any) => testFalsey(val)\n\nfunction arrIncludes<\n  TData,\n  TValue,\n  TAccessor extends AccessorFn<TData>,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  rows: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>[],\n  columnIds: string[],\n  filterValue: unknown\n) {\n  return rows.filter(row => {\n    return columnIds.some(id => {\n      const rowValue = row.values[id]\n      return rowValue.includes(filterValue)\n    })\n  })\n}\n\narrIncludes.autoRemove = (val: any) => testFalsey(val) || !val?.length\n\nfunction arrIncludesAll<\n  TData,\n  TValue,\n  TAccessor extends AccessorFn<TData>,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  rows: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>[],\n  columnIds: string[],\n  filterValue: unknown[]\n) {\n  return rows.filter(row => {\n    return columnIds.some(id => {\n      const rowValue = row.values[id]\n      return (\n        rowValue &&\n        rowValue.length &&\n        filterValue.every(val => rowValue.includes(val))\n      )\n    })\n  })\n}\n\narrIncludesAll.autoRemove = (val: any) => testFalsey(val) || !val?.length\n\nfunction equals<\n  TData,\n  TValue,\n  TAccessor extends AccessorFn<TData>,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  rows: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>[],\n  columnIds: string[],\n  filterValue: unknown\n) {\n  return rows.filter(row => {\n    return columnIds.some(id => {\n      const rowValue = row.values[id]\n      return rowValue === filterValue\n    })\n  })\n}\n\nequals.autoRemove = (val: any) => testFalsey(val)\n\nfunction weakEquals<\n  TData,\n  TValue,\n  TAccessor extends AccessorFn<TData>,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  rows: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>[],\n  columnIds: string[],\n  filterValue: unknown\n) {\n  return rows.filter(row => {\n    return columnIds.some(id => {\n      const rowValue = row.values[id]\n      // eslint-disable-next-line eqeqeq\n      return rowValue == filterValue\n    })\n  })\n}\n\nweakEquals.autoRemove = (val: any) => testFalsey(val)\n\nfunction betweenNumberRange<\n  TData,\n  TValue,\n  TAccessor extends AccessorFn<TData>,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  rows: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>[],\n  columnIds: string[],\n  filterValue: [unknown, unknown]\n) {\n  let [unsafeMin, unsafeMax] = filterValue || []\n\n  let parsedMin =\n    typeof unsafeMin !== 'number' ? parseFloat(unsafeMin as string) : unsafeMin\n  let parsedMax =\n    typeof unsafeMax !== 'number' ? parseFloat(unsafeMax as string) : unsafeMax\n\n  let min =\n    unsafeMin === null || Number.isNaN(parsedMin) ? -Infinity : parsedMin\n  let max = unsafeMax === null || Number.isNaN(parsedMax) ? Infinity : parsedMax\n\n  if (min > max) {\n    const temp = min\n    min = max\n    max = temp\n  }\n\n  return rows.filter(row => {\n    return columnIds.some(id => {\n      const rowValue = row.values[id]\n      return rowValue >= min && rowValue <= max\n    })\n  })\n}\n\nbetweenNumberRange.autoRemove = (val: any) =>\n  testFalsey(val) || (testFalsey(val[0]) && testFalsey(val[1]))\n\n// Utils\n\nfunction testFalsey(val: any) {\n  return val === undefined || val === null || val === ''\n}\n","import { RowModel } from '..'\nimport { BuiltInFilterType, filterTypes } from '../filterTypes'\nimport { Column, OnChangeFn, ReactTable, Row, Updater } from '../types'\nimport { functionalUpdate, isFunction, makeStateUpdater, memo } from '../utils'\n\nexport type ColumnFilter = {\n  id: string\n  value: unknown\n}\n\nexport type ColumnFiltersState = ColumnFilter[]\n\nexport type FilterFn<TData, TValue, TFilterFns, TSortingFns, TAggregationFns> =\n  {\n    (\n      rows: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>[],\n      columnIds: string[],\n      filterValue: any\n    ): any\n    autoRemove?: ColumnFilterAutoRemoveTestFn<\n      TData,\n      TValue,\n      TFilterFns,\n      TSortingFns,\n      TAggregationFns\n    >\n  }\n\nexport type ColumnFilterAutoRemoveTestFn<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n> = (\n  value: unknown,\n  column?: Column<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n) => boolean\n\nexport type CustomFilterTypes<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n> = Record<\n  string,\n  FilterFn<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n>\n\nexport type FiltersTableState = {\n  columnFilters: ColumnFiltersState\n  globalFilter: any\n}\n\nexport type FilterType<TFilterFns> =\n  | 'auto'\n  | BuiltInFilterType\n  | keyof TFilterFns\n  | FilterFn<unknown, unknown, TFilterFns, any, any>\n\nexport type FiltersColumnDef<TFilterFns> = {\n  filterType?: FilterType<TFilterFns>\n  enableAllFilters?: boolean\n  enableColumnFilter?: boolean\n  enableGlobalFilter?: boolean\n  defaultCanFilter?: boolean\n  defaultCanColumnFilter?: boolean\n  defaultCanGlobalFilter?: boolean\n}\n\nexport type FiltersColumn<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n> = {\n  filterType: FilterType<TFilterFns>\n  getCanColumnFilter: () => boolean\n  getCanGlobalFilter: () => boolean\n  getColumnFilterIndex: () => number\n  getIsColumnFiltered: () => boolean\n  getColumnFilterValue: () => unknown\n  setColumnFilterValue: (value: any) => void\n  getPreFilteredRows: () =>\n    | Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>[]\n    | undefined\n  getPreFilteredUniqueValues: () => Map<any, number>\n  getPreFilteredMinMaxValues: () => [any, any]\n}\n\nexport type FiltersOptions<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n> = {\n  filterFromChildrenUp?: boolean\n  filterTypes?: TFilterFns\n  enableFilters?: boolean\n  // Column\n  onColumnFiltersChange?: OnChangeFn<ColumnFiltersState>\n  autoResetColumnFilters?: boolean\n  enableColumnFilters?: boolean\n  columnFilterRowsFn?: (\n    instance: ReactTable<any, any, any, any, any>,\n    columnFilters: ColumnFiltersState,\n    coreRowModel: RowModel<any, any, any, any, any>\n  ) => RowModel<any, any, any, any, any>\n  // Global\n  globalFilterType?: FilterType<TFilterFns>\n  onGlobalFilterChange?: OnChangeFn<any>\n  enableGlobalFilters?: boolean\n  autoResetGlobalFilter?: boolean\n  enableGlobalFilter?: boolean\n  globalFilterRowsFn?: (\n    instance: ReactTable<any, any, any, any, any>,\n    globalFilter: any,\n    columnFilteredRowModel: RowModel<\n      TData,\n      TValue,\n      TFilterFns,\n      TSortingFns,\n      TAggregationFns\n    >\n  ) => RowModel<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n  getColumnCanGlobalFilterFn?: (\n    column: Column<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n  ) => boolean\n}\n\nexport type FiltersInstance<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n> = {\n  getColumnAutoFilterFn: (\n    columnId: string\n  ) => FilterFn<any, any, any, any, any> | undefined\n\n  getColumnFilterFn: (\n    columnId: string\n  ) => FilterFn<any, any, any, any, any> | undefined\n\n  setColumnFilters: (updater: Updater<ColumnFiltersState>) => void\n  setColumnFilterValue: (columnId: string, value: any) => void\n  resetColumnFilters: () => void\n  getColumnCanColumnFilter: (columnId: string) => boolean\n  getColumnCanGlobalFilterFn?: (\n    column: Column<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n  ) => boolean\n\n  getColumnIsFiltered: (columnId: string) => boolean\n  getColumnFilterValue: (columnId: string) => unknown\n  getColumnFilterIndex: (columnId: string) => number\n  getColumnFilteredRowModel: () => RowModel<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >\n  getPreColumnFilteredRows: () => Row<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getPreColumnFilteredFlatRows: () => Row<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getPreColumnFilteredRowsById: () => Record<\n    string,\n    Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n  >\n  getColumnFilteredRows: () => Row<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getColumnFilteredFlatRows: () => Row<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getColumnFilteredRowsById: () => Record<\n    string,\n    Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n  >\n\n  // Global\n  setGlobalFilter: (updater: Updater<any>) => void\n  resetGlobalFilter: () => void\n  getGlobalAutoFilterFn: () => FilterFn<any, any, any, any, any> | undefined\n  getGlobalFilterFn: () => FilterFn<any, any, any, any, any> | undefined\n  getColumnCanGlobalFilter: (columnId: string) => boolean\n  getGlobalFilteredRowModel: () => RowModel<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >\n  getPreGlobalFilteredRows: () => Row<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getPreGlobalFilteredFlatRows: () => Row<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getPreGlobalFilteredRowsById: () => Record<\n    string,\n    Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n  >\n  getGlobalFilteredRows: () => Row<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getGlobalFilteredFlatRows: () => Row<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getGlobalFilteredRowsById: () => Record<\n    string,\n    Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n  >\n}\n\n//\n\nexport function getDefaultColumn<TFilterFns>(): FiltersColumnDef<TFilterFns> {\n  return {\n    filterType: 'auto',\n  }\n}\n\nexport function getInitialState(): FiltersTableState {\n  return {\n    columnFilters: [],\n    globalFilter: undefined,\n  }\n}\n\nexport function getDefaultOptions<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  instance: ReactTable<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n): FiltersOptions<TData, TValue, TFilterFns, TSortingFns, TAggregationFns> {\n  return {\n    onColumnFiltersChange: makeStateUpdater('columnFilters', instance),\n    onGlobalFilterChange: makeStateUpdater('globalFilter', instance),\n    autoResetColumnFilters: true,\n    filterFromChildrenUp: true,\n    autoResetGlobalFilter: true,\n    globalFilterType: 'auto',\n    getColumnCanGlobalFilterFn: column => {\n      const value = instance.getCoreFlatRows()[0]?.getAllCellsByColumnId()[\n        column.id\n      ]?.value\n\n      return typeof value === 'string'\n    },\n  }\n}\n\nexport function createColumn<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  column: Column<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n  instance: ReactTable<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n): FiltersColumn<TData, TValue, TFilterFns, TSortingFns, TAggregationFns> {\n  const getFacetInfo = memo(\n    () => [column.getPreFilteredRows()],\n    (rows = []) => {\n      let preFilteredUniqueValues = new Map<any, number>()\n\n      let preFilteredMinMaxValues: [any, any] = [\n        rows[0]?.values[column.id] ?? null,\n        rows[0]?.values[column.id] ?? null,\n      ]\n\n      for (let i = 0; i < rows.length; i++) {\n        const value = rows[i]?.values[column.id]\n\n        if (preFilteredUniqueValues.has(value)) {\n          preFilteredUniqueValues.set(\n            value,\n            (preFilteredUniqueValues.get(value) ?? 0) + 1\n          )\n        } else {\n          preFilteredUniqueValues.set(value, 1)\n        }\n\n        if (value < preFilteredMinMaxValues[0]) {\n          preFilteredMinMaxValues[0] = value\n        } else if (value > preFilteredMinMaxValues[1]) {\n          preFilteredMinMaxValues[1] = value\n        }\n      }\n\n      return {\n        preFilteredUniqueValues,\n        preFilteredMinMaxValues,\n      }\n    },\n    'column.getFacetInfo',\n    instance.options.debug\n  )\n\n  return {\n    filterType: column.filterType,\n    getCanColumnFilter: () => instance.getColumnCanColumnFilter(column.id),\n    getCanGlobalFilter: () => instance.getColumnCanGlobalFilter(column.id),\n    getColumnFilterIndex: () => instance.getColumnFilterIndex(column.id),\n    getIsColumnFiltered: () => instance.getColumnIsFiltered(column.id),\n    getColumnFilterValue: () => instance.getColumnFilterValue(column.id),\n    setColumnFilterValue: val => instance.setColumnFilterValue(column.id, val),\n    getPreFilteredUniqueValues: () => getFacetInfo().preFilteredUniqueValues,\n    getPreFilteredMinMaxValues: () => getFacetInfo().preFilteredMinMaxValues,\n    getPreFilteredRows: () => undefined,\n  }\n}\n\nexport function getInstance<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  instance: ReactTable<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n): FiltersInstance<TData, TValue, TFilterFns, TSortingFns, TAggregationFns> {\n  return {\n    getColumnAutoFilterFn: columnId => {\n      const firstRow = instance.getCoreFlatRows()[0]\n\n      const value = firstRow?.values[columnId]\n\n      if (typeof value === 'string') {\n        return filterTypes.includesString\n      }\n\n      if (typeof value === 'number') {\n        return filterTypes.betweenNumberRange\n      }\n\n      if (value !== null && typeof value === 'object') {\n        return filterTypes.equals\n      }\n\n      if (Array.isArray(value)) {\n        return filterTypes.arrIncludes\n      }\n\n      return filterTypes.weakEquals\n    },\n    getGlobalAutoFilterFn: () => {\n      return filterTypes.includesString\n    },\n    getColumnFilterFn: columnId => {\n      const column = instance.getColumn(columnId)\n      const userFilterTypes = instance.options.filterTypes\n\n      if (!column) {\n        throw new Error()\n      }\n\n      return isFunction(column.filterType)\n        ? column.filterType\n        : column.filterType === 'auto'\n        ? instance.getColumnAutoFilterFn(columnId)\n        : (userFilterTypes as Record<string, any>)?.[\n            column.filterType as string\n          ] ??\n          (filterTypes[column.filterType as BuiltInFilterType] as FilterFn<\n            TData,\n            TValue,\n            TFilterFns,\n            TSortingFns,\n            TAggregationFns\n          >)\n    },\n\n    getGlobalFilterFn: () => {\n      const { filterTypes: userFilterTypes, globalFilterType } =\n        instance.options\n\n      return isFunction(globalFilterType)\n        ? globalFilterType\n        : globalFilterType === 'auto'\n        ? instance.getGlobalAutoFilterFn()\n        : (userFilterTypes as Record<string, any>)?.[\n            globalFilterType as string\n          ] ??\n          (filterTypes[globalFilterType as BuiltInFilterType] as FilterFn<\n            TData,\n            TValue,\n            TFilterFns,\n            TSortingFns,\n            TAggregationFns\n          >)\n    },\n\n    setColumnFilters: (updater: Updater<ColumnFiltersState>) => {\n      const leafColumns = instance.getAllLeafColumns()\n\n      const updateFn = (old?: ColumnFiltersState) => {\n        return functionalUpdate(updater, old)?.filter(filter => {\n          const column = leafColumns.find(d => d.id === filter.id)\n\n          if (column) {\n            const filterFn = instance.getColumnFilterFn(column.id)\n\n            if (shouldAutoRemoveFilter(filterFn, filter.value, column)) {\n              return false\n            }\n          }\n\n          return true\n        })\n      }\n\n      instance.options.onColumnFiltersChange?.(\n        updateFn,\n        updateFn(instance.getState().columnFilters)\n      )\n    },\n\n    setGlobalFilter: updater => {\n      instance.options.onGlobalFilterChange?.(\n        updater,\n        functionalUpdate(updater, instance.getState().globalFilter)\n      )\n    },\n\n    resetGlobalFilter: () => {\n      instance.setGlobalFilter(undefined)\n    },\n\n    getColumnCanColumnFilter: columnId => {\n      const column = instance.getColumn(columnId)\n\n      if (!column) {\n        throw new Error()\n      }\n\n      return (\n        column.enableAllFilters ??\n        column.enableColumnFilter ??\n        instance.options.enableFilters ??\n        instance.options.enableColumnFilters ??\n        column.defaultCanFilter ??\n        column.defaultCanColumnFilter ??\n        !!column.accessorFn\n      )\n    },\n\n    getColumnCanGlobalFilter: columnId => {\n      const column = instance.getColumn(columnId)\n\n      if (!column) {\n        throw new Error()\n      }\n\n      return (\n        ((instance.options.enableFilters ??\n          instance.options.enableGlobalFilter ??\n          column.enableAllFilters ??\n          column.enableGlobalFilter ??\n          column.defaultCanFilter ??\n          column.defaultCanGlobalFilter ??\n          !!column.accessorFn) &&\n          instance.options.getColumnCanGlobalFilterFn?.(column)) ??\n        true\n      )\n    },\n\n    getColumnIsFiltered: columnId =>\n      instance.getColumnFilterIndex(columnId) > -1,\n\n    getColumnFilterValue: columnId =>\n      instance.getState().columnFilters?.find(d => d.id === columnId)?.value,\n\n    getColumnFilterIndex: columnId =>\n      instance.getState().columnFilters?.findIndex(d => d.id === columnId) ??\n      -1,\n\n    setColumnFilterValue: (columnId, value) => {\n      if (!columnId) return\n\n      instance.setColumnFilters(old => {\n        const column = instance.getColumn(columnId)\n\n        if (!column) {\n          if (process.env.NODE_ENV !== 'production') {\n            console.warn(\n              `React-Table: Could not find a column with id: ${columnId}`\n            )\n          }\n          throw new Error()\n        }\n\n        const filterFn = instance.getColumnFilterFn(column.id)\n        const previousfilter = old?.find(d => d.id === columnId)\n\n        const newFilter = functionalUpdate(\n          value,\n          previousfilter ? previousfilter.value : undefined\n        )\n\n        //\n        if (\n          shouldAutoRemoveFilter(\n            filterFn as FilterFn<\n              TData,\n              TValue,\n              TFilterFns,\n              TSortingFns,\n              TAggregationFns\n            >,\n            newFilter,\n            column\n          )\n        ) {\n          return old?.filter(d => d.id !== columnId) ?? []\n        }\n\n        const newFilterObj = { id: columnId, value: newFilter }\n\n        if (previousfilter) {\n          return (\n            old?.map(d => {\n              if (d.id === columnId) {\n                return newFilterObj\n              }\n              return d\n            }) ?? []\n          )\n        }\n\n        if (old?.length) {\n          return [...old, newFilterObj]\n        }\n\n        return [newFilterObj]\n      })\n    },\n\n    resetColumnFilters: () => {\n      instance.setColumnFilters(\n        instance.options?.initialState?.columnFilters ?? []\n      )\n    },\n\n    getColumnFilteredRowModel: memo(\n      () => [\n        instance.getState().columnFilters,\n        instance.getCoreRowModel(),\n        instance.options.columnFilterRowsFn,\n      ],\n      (columnFilters, rowModel, columnFiltersFn) => {\n        const columnFilteredRowModel = (() => {\n          if (!columnFilters?.length || !columnFiltersFn) {\n            return rowModel\n          }\n\n          if (process.env.NODE_ENV !== 'production' && instance.options.debug)\n            console.info('Column Filtering...')\n\n          return columnFiltersFn(instance as any, columnFilters, rowModel)\n        })()\n\n        // Now that each filtered column has it's partially filtered rows,\n        // lets assign the final filtered rows to all of the other columns\n        const nonFilteredColumns = instance\n          .getAllLeafColumns()\n          .filter(\n            column =>\n              !instance.getState().columnFilters?.find(d => d.id === column.id)\n          )\n\n        // This essentially enables faceted filter options to be built easily\n        // using every column's preFilteredRows value\n\n        nonFilteredColumns.forEach(column => {\n          column.getPreFilteredRows = () => columnFilteredRowModel.rows\n        })\n\n        return columnFilteredRowModel\n      },\n      'getColumnFilteredRowModel',\n      instance.options.debug\n    ),\n\n    getPreColumnFilteredRows: () => instance.getCoreRowModel().rows,\n    getPreColumnFilteredFlatRows: () => instance.getCoreRowModel().flatRows,\n    getPreColumnFilteredRowsById: () => instance.getCoreRowModel().rowsById,\n    getColumnFilteredRows: () => instance.getColumnFilteredRowModel().rows,\n    getColumnFilteredFlatRows: () =>\n      instance.getColumnFilteredRowModel().flatRows,\n    getColumnFilteredRowsById: () =>\n      instance.getColumnFilteredRowModel().rowsById,\n\n    getGlobalFilteredRowModel: memo(\n      () => [\n        instance.getState().globalFilter,\n        instance.getColumnFilteredRowModel(),\n        instance.options.globalFilterRowsFn,\n      ],\n      (globalFilterValue, columnFilteredRowModel, globalFiltersFn) => {\n        const globalFilteredRowModel = (() => {\n          if (!globalFiltersFn || !globalFilterValue) {\n            return columnFilteredRowModel\n          }\n\n          if (process.env.NODE_ENV !== 'production' && instance.options.debug)\n            console.info('Global Filtering...')\n\n          return globalFiltersFn(\n            instance as ReactTable<any, any, any, any, any>,\n            globalFilterValue,\n            columnFilteredRowModel\n          )\n        })()\n\n        // Now that each filtered column has it's partially filtered rows,\n        // lets assign the final filtered rows to all of the other columns\n        const nonFilteredColumns = instance\n          .getAllLeafColumns()\n          .filter(\n            column =>\n              !instance.getState().columnFilters?.find(d => d.id === column.id)\n          )\n\n        // This essentially enables faceted filter options to be built easily\n        // using every column's preFilteredRows value\n\n        nonFilteredColumns.forEach(column => {\n          column.getPreFilteredRows = () => globalFilteredRowModel.rows\n        })\n\n        return globalFilteredRowModel\n      },\n      'getGlobalFilteredRowModel',\n      instance.options.debug\n    ),\n\n    getPreGlobalFilteredRows: () => instance.getColumnFilteredRowModel().rows,\n    getPreGlobalFilteredFlatRows: () =>\n      instance.getColumnFilteredRowModel().flatRows,\n    getPreGlobalFilteredRowsById: () =>\n      instance.getColumnFilteredRowModel().rowsById,\n    getGlobalFilteredRows: () => instance.getGlobalFilteredRowModel().rows,\n    getGlobalFilteredFlatRows: () =>\n      instance.getGlobalFilteredRowModel().flatRows,\n    getGlobalFilteredRowsById: () =>\n      instance.getGlobalFilteredRowModel().rowsById,\n  }\n}\n\nexport function shouldAutoRemoveFilter(\n  filterFn?: FilterFn<any, any, any, any, any>,\n  value?: any,\n  column?: Column<any, any, any, any, any>\n) {\n  return (\n    (filterFn && filterFn.autoRemove\n      ? filterFn.autoRemove(value, column)\n      : false) ||\n    typeof value === 'undefined' ||\n    (typeof value === 'string' && !value)\n  )\n}\n","import { Row } from './types'\n\nconst reSplitAlphaNumeric = /([0-9]+)/gm\n\nexport const sortTypes = {\n  alphanumeric,\n  alphanumericCaseSensitive,\n  text,\n  textCaseSensitive,\n  datetime,\n  basic,\n}\n\nexport type BuiltInSortType = keyof typeof sortTypes\n\nfunction alphanumeric<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>(\n  rowA: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n  rowB: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n  columnId: string\n) {\n  return compareAlphanumeric(\n    toString(rowA.values[columnId]).toLowerCase(),\n    toString(rowB.values[columnId]).toLowerCase()\n  )\n}\n\nfunction alphanumericCaseSensitive<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  rowA: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n  rowB: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n  columnId: string\n) {\n  return compareAlphanumeric(\n    toString(rowA.values[columnId]),\n    toString(rowB.values[columnId])\n  )\n}\n\n// Mixed sorting is slow, but very inclusive of many edge cases.\n// It handles numbers, mixed alphanumeric combinations, and even\n// null, undefined, and Infinity\nfunction compareAlphanumeric(aStr: string, bStr: string) {\n  // Split on number groups, but keep the delimiter\n  // Then remove falsey split values\n  const a = aStr.split(reSplitAlphaNumeric).filter(Boolean)\n  const b = bStr.split(reSplitAlphaNumeric).filter(Boolean)\n\n  // While\n  while (a.length && b.length) {\n    const aa = a.shift()!\n    const bb = b.shift()!\n\n    const an = parseInt(aa, 10)\n    const bn = parseInt(bb, 10)\n\n    const combo = [an, bn].sort()\n\n    // Both are string\n    if (isNaN(combo[0]!)) {\n      if (aa > bb) {\n        return 1\n      }\n      if (bb > aa) {\n        return -1\n      }\n      continue\n    }\n\n    // One is a string, one is a number\n    if (isNaN(combo[1]!)) {\n      return isNaN(an) ? -1 : 1\n    }\n\n    // Both are numbers\n    if (an > bn) {\n      return 1\n    }\n    if (bn > an) {\n      return -1\n    }\n  }\n\n  return a.length - b.length\n}\n\n// The text filter is more basic (less numeric support)\n// but is much faster\nfunction text<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>(\n  rowA: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n  rowB: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n  columnId: string\n) {\n  return compareBasic(\n    toString(rowA.values[columnId]).toLowerCase(),\n    toString(rowB.values[columnId]).toLowerCase()\n  )\n}\n\n// The text filter is more basic (less numeric support)\n// but is much faster\nfunction textCaseSensitive<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  rowA: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n  rowB: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n  columnId: string\n) {\n  return compareBasic(\n    toString(rowA.values[columnId]),\n    toString(rowB.values[columnId])\n  )\n}\n\nfunction datetime<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>(\n  rowA: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n  rowB: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n  columnId: string\n) {\n  return compareBasic(\n    (rowA.values[columnId] as Date).getTime(),\n    (rowB.values[columnId] as Date).getTime()\n  )\n}\n\nfunction basic<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>(\n  rowA: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n  rowB: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n  columnId: string\n) {\n  return compareBasic(rowA.values[columnId], rowB.values[columnId])\n}\n\n// Utils\n\nfunction compareBasic(a: any, b: any) {\n  return a === b ? 0 : a > b ? 1 : -1\n}\n\nfunction toString(a: any) {\n  if (typeof a === 'number') {\n    if (isNaN(a) || a === Infinity || a === -Infinity) {\n      return ''\n    }\n    return String(a)\n  }\n  if (typeof a === 'string') {\n    return a\n  }\n  return ''\n}\n","import { MouseEvent, TouchEvent } from 'react'\nimport { RowModel } from '..'\nimport { BuiltInSortType, sortTypes } from '../sortTypes'\n\nimport {\n  Column,\n  Getter,\n  OnChangeFn,\n  PropGetterValue,\n  ReactTable,\n  Row,\n  Updater,\n} from '../types'\n\nimport {\n  functionalUpdate,\n  isFunction,\n  makeStateUpdater,\n  memo,\n  propGetter,\n} from '../utils'\n\nexport type ColumnSort = {\n  id: string\n  desc: boolean\n}\n\nexport type SortingState = ColumnSort[]\n\nexport type SortingFn<TData, TValue, TFilterFns, TSortingFns, TAggregationFns> =\n  {\n    (\n      rowA: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n      rowB: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n      columnId: string\n    ): number\n  }\n\nexport type SortingTableState = {\n  sorting: SortingState\n}\n\nexport type SortType<TSortingFns> =\n  | 'auto'\n  | BuiltInSortType\n  | keyof TSortingFns\n  | SortingFn<any, any, any, TSortingFns, any>\n\nexport type SortingColumnDef<TFilterFns> = {\n  sortType?: SortType<TFilterFns>\n  sortDescFirst?: boolean\n  enableSorting?: boolean\n  enableMultiSort?: boolean\n  defaultCanSort?: boolean\n  invertSorting?: boolean\n  sortUndefined?: false | -1 | 1\n}\n\nexport type SortingColumn<\n  _TData,\n  _TValue,\n  TFilterFns,\n  _TSortingFns,\n  _TAggregationFns\n> = {\n  sortType: SortType<TFilterFns>\n  getCanSort: () => boolean\n  getCanMultiSort: () => boolean\n  getSortIndex: () => number\n  getIsSorted: () => false | 'asc' | 'desc'\n  toggleSorting: (desc?: boolean, isMulti?: boolean) => void\n  getToggleSortingProps: <TGetter extends Getter<ToggleSortingProps>>(\n    userProps?: TGetter\n  ) => undefined | PropGetterValue<ToggleSortingProps, TGetter>\n}\n\nexport type SortingOptions<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n> = {\n  sortTypes?: TSortingFns\n  onSortingChange?: OnChangeFn<SortingState>\n  autoResetSorting?: boolean\n  enableSorting?: boolean\n  enableSortingRemoval?: boolean\n  enableMultiRemove?: boolean\n  enableMultiSort?: boolean\n  sortDescFirst?: boolean\n  sortRowsFn?: (\n    instance: ReactTable<\n      TData,\n      TValue,\n      TFilterFns,\n      TSortingFns,\n      TAggregationFns\n    >,\n    sortingState: SortingState,\n    globalFilteredRowModel: RowModel<\n      TData,\n      TValue,\n      TFilterFns,\n      TSortingFns,\n      TAggregationFns\n    >\n  ) => RowModel<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n  maxMultiSortColCount?: number\n  isMultiSortEvent?: (e: MouseEvent | TouchEvent) => boolean\n}\n\nexport type ToggleSortingProps = {\n  title?: string\n  onClick?: (event: MouseEvent | TouchEvent) => void\n}\n\nexport type SortingInstance<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n> = {\n  getColumnAutoSortingFn: (\n    columnId: string\n  ) => SortingFn<any, any, any, any, any> | undefined\n\n  getColumnSortingFn: (\n    columnId: string\n  ) => SortingFn<any, any, any, any, any> | undefined\n\n  setSorting: (updater: Updater<SortingState>) => void\n  toggleColumnSorting: (\n    columnId: string,\n    desc?: boolean,\n    multi?: boolean\n  ) => void\n  resetSorting: () => void\n  getColumnCanSort: (columnId: string) => boolean\n  getColumnCanMultiSort: (columnId: string) => boolean\n  getColumnIsSorted: (columnId: string) => false | 'asc' | 'desc'\n  getColumnSortIndex: (columnId: string) => number\n  getToggleSortingProps: <TGetter extends Getter<ToggleSortingProps>>(\n    columnId: string,\n    userProps?: TGetter\n  ) => undefined | PropGetterValue<ToggleSortingProps, TGetter>\n  getSortedRowModel: () => RowModel<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >\n  getPreSortedRows: () => Row<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getPreSortedFlatRows: () => Row<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getPreSortedRowsById: () => Record<\n    string,\n    Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n  >\n  getSortedRows: () => Row<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getSortedFlatRows: () => Row<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getSortedRowsById: () => Record<\n    string,\n    Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n  >\n}\n\n//\n\nexport function getDefaultColumn<TFilterFns>(): SortingColumnDef<TFilterFns> {\n  return {\n    sortType: 'auto',\n  }\n}\n\nexport function getInitialState(): SortingTableState {\n  return {\n    sorting: [],\n  }\n}\n\nexport function getDefaultOptions<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  instance: ReactTable<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n): SortingOptions<TData, TValue, TFilterFns, TSortingFns, TAggregationFns> {\n  return {\n    onSortingChange: makeStateUpdater('sorting', instance),\n    autoResetSorting: true,\n  }\n}\n\nexport function createColumn<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  column: Column<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n  instance: ReactTable<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n): SortingColumn<TData, TValue, TFilterFns, TSortingFns, TAggregationFns> {\n  return {\n    sortType: column.sortType,\n    getCanSort: () => instance.getColumnCanSort(column.id),\n    getCanMultiSort: () => instance.getColumnCanMultiSort(column.id),\n    getSortIndex: () => instance.getColumnSortIndex(column.id),\n    getIsSorted: () => instance.getColumnIsSorted(column.id),\n    toggleSorting: (desc, isMulti) =>\n      instance.toggleColumnSorting(column.id, desc, isMulti),\n    getToggleSortingProps: userProps =>\n      instance.getToggleSortingProps(column.id, userProps),\n  }\n}\n\nexport function getInstance<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  instance: ReactTable<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n): SortingInstance<TData, TValue, TFilterFns, TSortingFns, TAggregationFns> {\n  return {\n    getColumnAutoSortingFn: columnId => {\n      const firstRow = instance.getGlobalFilteredRowModel().flatRows[0]\n\n      const value = firstRow?.values[columnId]\n\n      if (typeof value === 'string') {\n        return sortTypes.alphanumeric\n      }\n\n      if (Object.prototype.toString.call(value) === '[object Date]') {\n        return sortTypes.datetime\n      }\n\n      return sortTypes.basic\n    },\n    getColumnSortingFn: columnId => {\n      const column = instance.getColumn(columnId)\n      const userSortTypes = instance.options.sortTypes\n\n      if (!column) {\n        throw new Error()\n      }\n\n      return isFunction(column.sortType)\n        ? column.sortType\n        : column.sortType === 'auto'\n        ? instance.getColumnAutoFilterFn(columnId)\n        : (userSortTypes as Record<string, any>)?.[column.sortType as string] ??\n          (sortTypes[column.sortType as BuiltInSortType] as SortingFn<\n            TData,\n            TValue,\n            TFilterFns,\n            TSortingFns,\n            TAggregationFns\n          >)\n    },\n\n    setSorting: updater =>\n      instance.options.onSortingChange?.(\n        updater,\n        functionalUpdate(updater, instance.getState().sorting)\n      ),\n\n    toggleColumnSorting: (columnId, desc, multi) => {\n      const column = instance.getColumn(columnId)\n\n      if (!column) {\n        throw new Error()\n      }\n\n      instance.setSorting(old => {\n        // Find any existing sorting for this column\n        const existingSorting = old?.find(d => d.id === columnId)\n        const existingIndex = old?.findIndex(d => d.id === columnId)\n        const hasDescDefined = typeof desc !== 'undefined' && desc !== null\n\n        let newSorting: SortingState = []\n\n        // What should we do with this sort action?\n        let sortAction\n\n        if (!column.getCanMultiSort() && multi) {\n          if (existingSorting) {\n            sortAction = 'toggle'\n          } else {\n            sortAction = 'add'\n          }\n        } else {\n          // Normal mode\n          if (old?.length && existingIndex !== old.length - 1) {\n            sortAction = 'replace'\n          } else if (existingSorting) {\n            sortAction = 'toggle'\n          } else {\n            sortAction = 'replace'\n          }\n        }\n\n        const sortDescFirst =\n          column.sortDescFirst ?? instance.options.sortDescFirst\n\n        // Handle toggle states that will remove the sorting\n        if (\n          sortAction === 'toggle' && // Must be toggling\n          (instance.options.enableSortingRemoval ?? true) && // If enableSortRemove, enable in general\n          !hasDescDefined && // Must not be setting desc\n          (multi ? instance.options.enableMultiRemove ?? true : true) && // If multi, don't allow if enableMultiRemove\n          (existingSorting?.desc // Finally, detect if it should indeed be removed\n            ? !sortDescFirst\n            : sortDescFirst)\n        ) {\n          sortAction = 'remove'\n        }\n\n        if (sortAction === 'replace') {\n          newSorting = [\n            {\n              id: columnId,\n              desc: hasDescDefined ? desc! : !!sortDescFirst,\n            },\n          ]\n        } else if (sortAction === 'add' && old?.length) {\n          newSorting = [\n            ...old,\n            {\n              id: columnId,\n              desc: hasDescDefined ? desc! : !!sortDescFirst,\n            },\n          ]\n          // Take latest n columns\n          newSorting.splice(\n            0,\n            newSorting.length -\n              (instance.options.maxMultiSortColCount ?? Number.MAX_SAFE_INTEGER)\n          )\n        } else if (sortAction === 'toggle' && old?.length) {\n          // This flips (or sets) the\n          newSorting = old.map(d => {\n            if (d.id === columnId) {\n              return {\n                ...d,\n                desc: hasDescDefined ? desc! : !existingSorting?.desc,\n              }\n            }\n            return d\n          })\n        } else if (sortAction === 'remove' && old?.length) {\n          newSorting = old.filter(d => d.id !== columnId)\n        }\n\n        return newSorting\n      })\n    },\n\n    getColumnCanSort: columnId => {\n      const column = instance.getColumn(columnId)\n\n      if (!column) {\n        throw new Error()\n      }\n\n      return (\n        column.enableSorting ??\n        instance.options.enableSorting ??\n        column.defaultCanSort ??\n        !!column.accessorFn\n      )\n    },\n\n    getColumnCanMultiSort: columnId => {\n      const column = instance.getColumn(columnId)\n\n      if (!column) {\n        throw new Error()\n      }\n\n      return (\n        column.enableMultiSort ??\n        instance.options.enableMultiSort ??\n        !!column.accessorFn\n      )\n    },\n\n    getColumnIsSorted: columnId => {\n      const columnSort = instance\n        .getState()\n        .sorting?.find(d => d.id === columnId)\n\n      return !columnSort ? false : columnSort.desc ? 'desc' : 'asc'\n    },\n\n    getColumnSortIndex: columnId =>\n      instance.getState().sorting?.findIndex(d => d.id === columnId) ?? -1,\n\n    resetSorting: () => {\n      instance.setSorting(instance.options?.initialState?.sorting ?? [])\n    },\n\n    getToggleSortingProps: (columnId, userProps) => {\n      const column = instance.getColumn(columnId)\n\n      if (!column) {\n        throw new Error()\n      }\n\n      const canSort = column.getCanSort()\n\n      const initialProps: ToggleSortingProps = {\n        title: canSort ? 'Toggle Sorting' : undefined,\n        onClick: canSort\n          ? (e: MouseEvent | TouchEvent) => {\n              e.persist()\n              column.toggleSorting?.(\n                undefined,\n                column.getCanMultiSort()\n                  ? instance.options.isMultiSortEvent?.(e)\n                  : false\n              )\n            }\n          : undefined,\n      }\n\n      return propGetter(initialProps, userProps)\n    },\n\n    getSortedRowModel: memo(\n      () => [\n        instance.getState().sorting,\n        instance.getGlobalFilteredRowModel(),\n        instance.options.sortRowsFn,\n      ],\n      (sorting, rowModel, sortingFn) => {\n        if (!sortingFn || !sorting?.length) {\n          return rowModel\n        }\n\n        if (process.env.NODE_ENV !== 'production' && instance.options.debug)\n          console.info('Sorting...')\n\n        return sortingFn(instance, sorting, rowModel)\n      },\n      'getSortedRowModel',\n      instance.options.debug\n    ),\n\n    getPreSortedRows: () => instance.getGlobalFilteredRowModel().rows,\n    getPreSortedFlatRows: () => instance.getGlobalFilteredRowModel().flatRows,\n    getPreSortedRowsById: () => instance.getGlobalFilteredRowModel().rowsById,\n    getSortedRows: () => instance.getSortedRowModel().rows,\n    getSortedFlatRows: () => instance.getSortedRowModel().flatRows,\n    getSortedRowsById: () => instance.getSortedRowModel().rowsById,\n  }\n}\n","import { MouseEvent, TouchEvent } from 'react'\nimport { RowModel } from '..'\nimport {\n  Getter,\n  OnChangeFn,\n  PropGetterValue,\n  ReactTable,\n  Row,\n  Updater,\n} from '../types'\nimport { functionalUpdate, makeStateUpdater, memo, propGetter } from '../utils'\n\nexport type ExpandedStateList = Record<string, boolean>\nexport type ExpandedState = true | Record<string, boolean>\nexport type ExpandedTableState = {\n  expanded: ExpandedState\n}\n\nexport type ExpandedRow = {\n  toggleExpanded: (expanded?: boolean) => void\n  getIsExpanded: () => boolean\n  getCanExpand: () => boolean\n  getToggleExpandedProps: <TGetter extends Getter<ToggleExpandedProps>>(\n    userProps?: TGetter\n  ) => undefined | PropGetterValue<ToggleExpandedProps, TGetter>\n}\n\nexport type ExpandedOptions<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n> = {\n  onExpandedChange?: OnChangeFn<ExpandedState>\n  autoResetExpanded?: boolean\n  enableExpanded?: boolean\n  expandRowsFn?: (\n    instance: ReactTable<\n      TData,\n      TValue,\n      TFilterFns,\n      TSortingFns,\n      TAggregationFns\n    >,\n    expandedState: ExpandedState,\n    groupedRowModel: RowModel<\n      TData,\n      TValue,\n      TFilterFns,\n      TSortingFns,\n      TAggregationFns\n    >\n  ) => RowModel<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n  expandSubRows?: boolean\n  defaultCanExpand?: boolean\n  getIsRowExpanded?: (\n    row: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n  ) => boolean\n  getRowCanExpand?: (\n    row: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n  ) => boolean\n  paginateExpandedRows?: boolean\n}\n\nexport type ToggleExpandedProps = {\n  title?: string\n  onClick?: (event: MouseEvent | TouchEvent) => void\n}\n\nexport type ExpandedInstance<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n> = {\n  setExpanded: (updater: Updater<ExpandedState>) => void\n  toggleRowExpanded: (rowId: string, expanded?: boolean) => void\n  toggleAllRowsExpanded: (expanded?: boolean) => void\n  resetExpanded: () => void\n  getRowCanExpand: (rowId: string) => boolean\n  getIsRowExpanded: (rowId: string) => boolean\n  getToggleExpandedProps: <TGetter extends Getter<ToggleExpandedProps>>(\n    rowId: string,\n    userProps?: TGetter\n  ) => undefined | PropGetterValue<ToggleExpandedProps, TGetter>\n  getToggleAllRowsExpandedProps: <TGetter extends Getter<ToggleExpandedProps>>(\n    userProps?: TGetter\n  ) => undefined | PropGetterValue<ToggleExpandedProps, TGetter>\n  getIsAllRowsExpanded: () => boolean\n  getExpandedDepth: () => number\n  getExpandedRowModel: () => RowModel<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >\n  getPreExpandedRows: () => Row<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getPreExpandedFlatRows: () => Row<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getPreExpandedRowsById: () => Record<\n    string,\n    Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n  >\n  getExpandedRows: () => Row<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getExpandedFlatRows: () => Row<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getExpandedRowsById: () => Record<\n    string,\n    Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n  >\n}\n\n//\n\nexport function getInitialState(): ExpandedTableState {\n  return {\n    expanded: {},\n  }\n}\n\nexport function getDefaultOptions<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  instance: ReactTable<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n): ExpandedOptions<TData, TValue, TFilterFns, TSortingFns, TAggregationFns> {\n  return {\n    onExpandedChange: makeStateUpdater('expanded', instance),\n    autoResetExpanded: true,\n    getIsRowExpanded: row => !!(row?.original as { expanded?: any }).expanded,\n    expandSubRows: true,\n    paginateExpandedRows: true,\n  }\n}\n\nexport function getInstance<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  instance: ReactTable<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n): ExpandedInstance<TData, TValue, TFilterFns, TSortingFns, TAggregationFns> {\n  return {\n    setExpanded: updater =>\n      instance.options.onExpandedChange?.(\n        updater,\n        functionalUpdate(updater, instance.getState().expanded)\n      ),\n    toggleRowExpanded: (rowId, expanded) => {\n      if (!rowId) return\n\n      instance.setExpanded((old = {}) => {\n        const exists = old === true ? true : !!old?.[rowId]\n\n        let oldExpanded: ExpandedStateList = {}\n\n        if (old === true) {\n          Object.keys(instance.getRowsById()).forEach(rowId => {\n            oldExpanded[rowId] = true\n          })\n        } else {\n          oldExpanded = old\n        }\n\n        expanded = expanded ?? !exists\n\n        if (!exists && expanded) {\n          return {\n            ...oldExpanded,\n            [rowId]: true,\n          }\n        }\n\n        if (exists && !expanded) {\n          const { [rowId]: _, ...rest } = oldExpanded\n          return rest\n        }\n\n        return old\n      })\n    },\n    toggleAllRowsExpanded: expanded => {\n      if (expanded ?? !instance.getIsAllRowsExpanded()) {\n        instance.setExpanded(true)\n      } else {\n        instance.setExpanded({})\n      }\n    },\n    resetExpanded: () => {\n      instance.setExpanded(instance.options?.initialState?.expanded ?? {})\n    },\n    getIsRowExpanded: rowId => {\n      const row = instance.getRow(rowId)\n\n      if (!row) {\n        if (process.env.NODE_ENV !== 'production') {\n          console.warn(\n            `[ReactTable] getIsRowExpanded: no row found with id ${rowId}`\n          )\n        }\n        throw new Error()\n      }\n\n      const expanded = instance.getState().expanded\n\n      return !!(\n        instance.options.getIsRowExpanded?.(row) ??\n        (expanded || expanded?.[rowId])\n      )\n    },\n    getRowCanExpand: rowId => {\n      const row = instance.getRow(rowId)\n\n      if (!row) {\n        if (process.env.NODE_ENV !== 'production') {\n          console.warn(\n            `[ReactTable] getRowCanExpand: no row found with id ${rowId}`\n          )\n        }\n        throw new Error()\n      }\n\n      return (\n        instance.options.getRowCanExpand?.(row) ??\n        instance.options.enableExpanded ??\n        instance.options.defaultCanExpand ??\n        !!row.subRows?.length\n      )\n    },\n    getToggleExpandedProps: (rowId, userProps) => {\n      const row = instance.getRow(rowId)\n\n      if (!row) {\n        return\n      }\n\n      const canExpand = instance.getRowCanExpand(rowId)\n\n      const initialProps: ToggleExpandedProps = {\n        title: canExpand ? 'Toggle Expanded' : undefined,\n        onClick: canExpand\n          ? (e: MouseEvent | TouchEvent) => {\n              e.persist()\n              instance.toggleRowExpanded(rowId)\n            }\n          : undefined,\n      }\n\n      return propGetter(initialProps, userProps)\n    },\n    getToggleAllRowsExpandedProps: userProps => {\n      const initialProps: ToggleExpandedProps = {\n        title: 'Toggle All Expanded',\n        onClick: (e: MouseEvent | TouchEvent) => {\n          e.persist()\n          instance.toggleAllRowsExpanded()\n        },\n      }\n\n      return propGetter(initialProps, userProps)\n    },\n    getIsAllRowsExpanded: () => {\n      const expanded = instance.getState().expanded\n\n      // If expanded is true, save some cycles and return true\n      if (expanded === true) {\n        return true\n      }\n\n      // If any row is not expanded, return false\n      if (\n        Object.keys(instance.getRowsById()).some(\n          id => !instance.getIsRowExpanded(id)\n        )\n      ) {\n        return false\n      }\n\n      // They must all be expanded :shrug:\n      return true\n    },\n    getExpandedDepth: () => {\n      let maxDepth = 0\n\n      const rowIds =\n        instance.getState().expanded === true\n          ? Object.keys(instance.getRowsById())\n          : Object.keys(instance.getState().expanded)\n\n      rowIds.forEach(id => {\n        const splitId = id.split('.')\n        maxDepth = Math.max(maxDepth, splitId.length)\n      })\n\n      return maxDepth\n    },\n    getExpandedRowModel: memo(\n      () => [\n        instance.getState().expanded,\n        instance.getGroupedRowModel(),\n        instance.options.expandRowsFn,\n        instance.options.paginateExpandedRows,\n      ],\n      (expanded, rowModel, expandRowsFn, paginateExpandedRows) => {\n        if (\n          !expandRowsFn ||\n          // Do not expand if rows are not included in pagination\n          !paginateExpandedRows ||\n          !Object.keys(expanded ?? {}).length\n        ) {\n          return rowModel\n        }\n\n        if (process.env.NODE_ENV !== 'production' && instance.options.debug)\n          console.info('Expanding...')\n\n        return expandRowsFn(instance, expanded, rowModel)\n      },\n      'getExpandedRowModel',\n      instance.options.debug\n    ),\n\n    getPreExpandedRows: () => instance.getGroupedRowModel().rows,\n    getPreExpandedFlatRows: () => instance.getGroupedRowModel().flatRows,\n    getPreExpandedRowsById: () => instance.getGroupedRowModel().rowsById,\n    getExpandedRows: () => instance.getExpandedRowModel().rows,\n    getExpandedFlatRows: () => instance.getExpandedRowModel().flatRows,\n    getExpandedRowsById: () => instance.getExpandedRowModel().rowsById,\n  }\n}\n\nexport function createRow<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  row: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n  instance: ReactTable<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n): ExpandedRow {\n  return {\n    toggleExpanded: expanded =>\n      void instance.toggleRowExpanded(row.id, expanded),\n    getIsExpanded: () => instance.getIsRowExpanded(row.id),\n    getCanExpand: () => row.subRows && !!row.subRows.length,\n    getToggleExpandedProps: userProps => {\n      const initialProps: ToggleExpandedProps = {\n        title: 'Toggle Row Expanded',\n        onClick: (e: MouseEvent | TouchEvent) => {\n          e.stopPropagation()\n          instance.toggleRowExpanded(row.id)\n        },\n      }\n      return propGetter(initialProps, userProps)\n    },\n  }\n}\n","import {\n  flattenBy,\n  functionalUpdate,\n  propGetter,\n  memo,\n  flexRender,\n  RequiredKeys,\n} from './utils'\n\nimport {\n  Updater,\n  PropGetterValue,\n  Options,\n  TableState,\n  ColumnDef,\n  Row,\n  Column,\n  Cell,\n  Header,\n  AccessorFn,\n  HeaderRenderProps,\n  TableProps,\n  TableBodyProps,\n  PropGetter,\n  Getter,\n  RowProps,\n  CellProps,\n  ReactTable,\n  RowValues,\n  Renderable,\n} from './types'\n\nimport * as Visibility from './features/Visibility'\nimport * as Ordering from './features/Ordering'\nimport * as Pinning from './features/Pinning'\nimport * as Headers from './features/Headers'\nimport * as Filters from './features/Filters'\nimport * as Sorting from './features/Sorting'\nimport * as Grouping from './features/Grouping'\nimport * as Expanding from './features/Expanding'\nimport { RowModel } from '.'\n\n// import './features/withColumnResizing';\n// import './features/withPagination';\n// import './features/withRowSelection';\n\nexport type CoreOptions<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n> = {\n  data: TData[]\n  columns: ColumnDef<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>[]\n  debug?: boolean\n  defaultColumn?: Partial<\n    ColumnDef<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n  >\n  initialState?: Partial<TableState>\n  state?: Partial<TableState>\n  getSubRows?: (originalRow: TData, index: number) => TData[]\n  getRowId?: (\n    originalRow: TData,\n    index: number,\n    parent?: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n  ) => string\n  onStateChange?: (newState: TableState) => void\n}\n\nexport type TableCore<TData, TValue, TFilterFns, TSortingFns, TAggregationFns> =\n  {\n    rerender: () => void\n    initialState: TableState\n    internalState: TableState\n    reset: () => void\n    options: RequiredKeys<\n      Options<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n      'state'\n    >\n    updateOptions: (\n      newOptions: Options<\n        TData,\n        TValue,\n        TFilterFns,\n        TSortingFns,\n        TAggregationFns\n      >\n    ) => void\n    getRowId: (\n      _: TData,\n      index: number,\n      parent?: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n    ) => string\n    getState: () => TableState\n    setState: (updater: Updater<TableState>) => void\n    getDefaultColumn: () => Partial<\n      ColumnDef<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n    >\n    getColumnDefs: () => ColumnDef<\n      TData,\n      TValue,\n      TFilterFns,\n      TSortingFns,\n      TAggregationFns\n    >[]\n    createColumn: (\n      columnDef: ColumnDef<\n        TData,\n        TValue,\n        TFilterFns,\n        TSortingFns,\n        TAggregationFns\n      >,\n      depth: number,\n      parent?: Column<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n    ) => Column<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n    getAllColumns: () => Column<\n      TData,\n      TValue,\n      TFilterFns,\n      TSortingFns,\n      TAggregationFns\n    >[]\n    getAllFlatColumns: () => Column<\n      TData,\n      TValue,\n      TFilterFns,\n      TSortingFns,\n      TAggregationFns\n    >[]\n    getAllFlatColumnsById: () => Record<\n      string,\n      Column<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n    >\n    getAllLeafColumns: () => Column<\n      TData,\n      TValue,\n      TFilterFns,\n      TSortingFns,\n      TAggregationFns\n    >[]\n    getColumn: (\n      columnId: string\n    ) => Column<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n    getColumnWidth: (columnId: string) => number\n    getTotalWidth: () => number\n    createCell: (\n      row: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n      column: Column<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n      value: any\n    ) => Cell<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n    createRow: (\n      id: string,\n      original: TData | undefined,\n      rowIndex: number,\n      depth: number,\n      values: Record<string, any>\n    ) => Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n    getCoreRowModel: () => RowModel<\n      TData,\n      TValue,\n      TFilterFns,\n      TSortingFns,\n      TAggregationFns\n    >\n    getCoreRows: () => Row<\n      TData,\n      TValue,\n      TFilterFns,\n      TSortingFns,\n      TAggregationFns\n    >[]\n    getCoreFlatRows: () => Row<\n      TData,\n      TValue,\n      TFilterFns,\n      TSortingFns,\n      TAggregationFns\n    >[]\n    getCoreRowsById: () => Record<\n      string,\n      Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n    >\n    getRowModel: () => RowModel<\n      TData,\n      TValue,\n      TFilterFns,\n      TSortingFns,\n      TAggregationFns\n    >\n    getRows: () => Row<\n      TData,\n      TValue,\n      TFilterFns,\n      TSortingFns,\n      TAggregationFns\n    >[]\n    getFlatRows: () => Row<\n      TData,\n      TValue,\n      TFilterFns,\n      TSortingFns,\n      TAggregationFns\n    >[]\n    getRowsById: () => Record<\n      string,\n      Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n    >\n    getRow: (\n      id: string\n    ) => Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n    getCell: (\n      rowId: string,\n      columnId: string\n    ) => Cell<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n    getTableProps: PropGetter<TableProps>\n    getTableBodyProps: PropGetter<TableBodyProps>\n    getRowProps: <TGetter extends Getter<RowProps>>(\n      rowId: string,\n      userProps?: TGetter\n    ) => undefined | PropGetterValue<RowProps, TGetter>\n    getCellProps: <TGetter extends Getter<CellProps>>(\n      rowId: string,\n      columnId: string,\n      userProps?: TGetter\n    ) => undefined | PropGetterValue<CellProps, TGetter>\n  }\n\nexport type CoreRow<TData, TValue, TFilterFns, TSortingFns, TAggregationFns> = {\n  id: string\n  index: number\n  original?: TData\n  depth: number\n  values: RowValues\n  leafRows: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>[]\n  subRows: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>[]\n  getRowProps: PropGetter<RowProps>\n  originalSubRows?: TData[]\n  getAllCells: () => Cell<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getAllCellsByColumnId: () => Record<\n    string,\n    Cell<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n  >\n}\n\nexport type CoreColumnDef<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n> = (\n  | {\n      accessorFn: AccessorFn<TData>\n      id: string\n      accessorKey?: never\n      header?:\n        | string\n        | Renderable<{\n            header: Header<\n              TData,\n              TValue,\n              TFilterFns,\n              TSortingFns,\n              TAggregationFns\n            >\n            column: Column<\n              TData,\n              TValue,\n              TFilterFns,\n              TSortingFns,\n              TAggregationFns\n            >\n          }>\n    }\n  | {\n      accessorKey: string & keyof TData\n      id?: string\n      accessorFn?: never\n      header?:\n        | string\n        | Renderable<{\n            header: Header<\n              TData,\n              TValue,\n              TFilterFns,\n              TSortingFns,\n              TAggregationFns\n            >\n            column: Column<\n              TData,\n              TValue,\n              TFilterFns,\n              TSortingFns,\n              TAggregationFns\n            >\n          }>\n    }\n  | {\n      id: string\n      accessorKey?: never\n      accessorFn?: never\n      header?:\n        | string\n        | Renderable<{\n            header: Header<\n              TData,\n              TValue,\n              TFilterFns,\n              TSortingFns,\n              TAggregationFns\n            >\n            column: Column<\n              TData,\n              TValue,\n              TFilterFns,\n              TSortingFns,\n              TAggregationFns\n            >\n          }>\n    }\n  | {\n      header: string\n      id?: string\n      accessorKey?: never\n      accessorFn?: never\n    }\n) & {\n  __generated: true\n  width?: number\n  minWidth?: number\n  maxWidth?: number\n  columns?: ColumnDef<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>[]\n  footer?: Renderable<{\n    header: Header<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n    column: Column<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n  }>\n  cell?: Renderable<{\n    column: Column<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n    cell: Cell<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n    value: TValue\n  }>\n  defaultIsVisible?: boolean\n}\n\nexport type CoreColumn<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n> = {\n  id: string\n  depth: number\n  accessorFn?: AccessorFn<TData>\n  columnDef: ColumnDef<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n  getWidth: () => number\n  columns: Column<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>[]\n  parent?: Column<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n  getFlatColumns: () => Column<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n  getLeafColumns: () => Column<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >[]\n}\n\nexport function createTableInstance<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(\n  options: Options<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n  rerender: () => void\n): ReactTable<TData, TValue, TFilterFns, TSortingFns, TAggregationFns> {\n  if (process.env.NODE_ENV !== 'production' && options.debug) {\n    console.info('Creating React Table Instance...')\n  }\n\n  let instance = {} as ReactTable<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >\n\n  const defaultOptions = {\n    ...Visibility.getDefaultOptions(instance),\n    ...Ordering.getDefaultOptions(instance),\n    ...Pinning.getDefaultOptions(instance),\n    ...Filters.getDefaultOptions(instance),\n    ...Sorting.getDefaultOptions(instance),\n    ...Grouping.getDefaultOptions(instance),\n    ...Expanding.getDefaultOptions(instance),\n  }\n\n  const defaultState = {}\n\n  const buildOptions = (\n    options: Options<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n  ) => ({\n    state: defaultState,\n    ...defaultOptions,\n    ...options,\n  })\n\n  instance.options = buildOptions(options)\n\n  const initialState = {\n    ...Visibility.getInitialState(),\n    ...Ordering.getInitialState(),\n    ...Pinning.getInitialState(),\n    ...Filters.getInitialState(),\n    ...Sorting.getInitialState(),\n    ...Grouping.getInitialState(),\n    ...Expanding.getInitialState(),\n    ...(options.initialState ?? {}),\n  }\n\n  const finalInstance: ReactTable<\n    TData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  > = {\n    ...instance,\n    ...Visibility.getInstance(instance),\n    ...Ordering.getInstance(instance),\n    ...Pinning.getInstance(instance),\n    ...Headers.getInstance(instance),\n    ...Filters.getInstance(instance),\n    ...Sorting.getInstance(instance),\n    ...Grouping.getInstance(instance),\n    ...Expanding.getInstance(instance),\n    rerender,\n    initialState,\n    internalState: initialState,\n    reset: () => {\n      instance.setState(instance.initialState)\n    },\n    updateOptions: newOptions => {\n      instance.options = buildOptions(newOptions)\n    },\n\n    getRowId: (\n      _: TData,\n      index: number,\n      parent?: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n    ) => `${parent ? [parent.id, index].join('.') : index}`,\n\n    getState: () => {\n      return {\n        ...instance.internalState,\n        ...instance.options.state,\n      }\n    },\n\n    setState: (\n      updater: Updater<TableState>,\n      shouldRerender: boolean = true\n    ) => {\n      const newState = functionalUpdate(updater, instance.internalState)\n      const onStateChange = instance.options.onStateChange\n\n      instance.internalState = newState\n\n      if (onStateChange) {\n        onStateChange(newState)\n        return\n      }\n\n      if (shouldRerender) {\n        instance.rerender()\n      }\n    },\n\n    getDefaultColumn: memo(\n      () => [instance.options.defaultColumn],\n      defaultColumn => {\n        defaultColumn = (defaultColumn ?? {}) as Partial<\n          ColumnDef<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n        >\n\n        return {\n          header: (\n            props: HeaderRenderProps<\n              Header<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n            >\n          ) => props.header.column.id,\n          footer: (\n            props: HeaderRenderProps<\n              Header<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n            >\n          ) => props.header.column.id,\n          cell: ({ value = '' }: { value: any }): JSX.Element =>\n            typeof value === 'boolean' ? value.toString() : value,\n          ...Visibility.getDefaultColumn(),\n          ...Filters.getDefaultColumn(),\n          ...Sorting.getDefaultColumn(),\n          ...Grouping.getDefaultColumn(),\n          ...defaultColumn,\n        } as Partial<\n          ColumnDef<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n        >\n      },\n      'getDefaultColumn',\n      instance.options.debug\n    ),\n\n    getColumnDefs: () => instance.options.columns,\n\n    createColumn: (columnDef, depth: number, parent) => {\n      const defaultColumn = instance.getDefaultColumn()\n\n      let id =\n        columnDef.id ??\n        columnDef.accessorKey ??\n        (typeof columnDef.header === 'string' ? columnDef.header : undefined)\n\n      let accessorFn: AccessorFn<TData> | undefined\n\n      if (columnDef.accessorFn) {\n        accessorFn = columnDef.accessorFn\n      } else if (columnDef.accessorKey) {\n        accessorFn = (originalRow?: TData) =>\n          (originalRow as any)[columnDef.accessorKey]\n      }\n\n      if (!id) {\n        if (process.env.NODE_ENV !== 'production') {\n          throw new Error(\n            columnDef.accessorFn\n              ? `Columns require an id when using an accessorFn`\n              : `Columns require an id when using a non-string header`\n          )\n        }\n        throw new Error()\n      }\n\n      let column: CoreColumn<\n        TData,\n        TValue,\n        TFilterFns,\n        TSortingFns,\n        TAggregationFns\n      > = {\n        width: 150,\n        minWidth: 20,\n        maxWidth: Number.MAX_SAFE_INTEGER,\n        ...defaultColumn,\n        ...columnDef,\n        id: `${id}`,\n        accessorFn,\n        parent: parent as any,\n        depth,\n        columnDef,\n        columns: [],\n        getWidth: () => instance.getColumnWidth(column.id),\n        getFlatColumns: memo(\n          () => [true],\n          () => {\n            return [\n              column as Column<\n                TData,\n                TValue,\n                TFilterFns,\n                TSortingFns,\n                TAggregationFns\n              >,\n              ...column.columns?.flatMap(d => d.getFlatColumns()),\n            ]\n          },\n          'column.getFlatColumns',\n          instance.options.debug\n        ),\n        getLeafColumns: memo(\n          () => [instance.getOrderColumnsFn()],\n          orderColumns => {\n            if (column.columns?.length) {\n              let leafColumns = column.columns.flatMap(column =>\n                column.getLeafColumns()\n              )\n\n              return orderColumns(leafColumns)\n            }\n\n            return [\n              column as Column<\n                TData,\n                TValue,\n                TFilterFns,\n                TSortingFns,\n                TAggregationFns\n              >,\n            ]\n          },\n          'column.getLeafColumns',\n          instance.options.debug\n        ),\n      }\n\n      column = Object.assign(\n        column,\n        Visibility.createColumn(\n          column as Column<\n            TData,\n            TValue,\n            TFilterFns,\n            TSortingFns,\n            TAggregationFns\n          >,\n          instance\n        ),\n        Pinning.createColumn(\n          column as Column<\n            TData,\n            TValue,\n            TFilterFns,\n            TSortingFns,\n            TAggregationFns\n          >,\n          instance\n        ),\n        Filters.createColumn(\n          column as Column<\n            TData,\n            TValue,\n            TFilterFns,\n            TSortingFns,\n            TAggregationFns\n          >,\n          instance\n        ),\n        Sorting.createColumn(\n          column as Column<\n            TData,\n            TValue,\n            TFilterFns,\n            TSortingFns,\n            TAggregationFns\n          >,\n          instance\n        ),\n        Grouping.createColumn(\n          column as Column<\n            TData,\n            TValue,\n            TFilterFns,\n            TSortingFns,\n            TAggregationFns\n          >,\n          instance\n        )\n      )\n\n      // Yes, we have to convert instance to uknown, because we know more than the compiler here.\n      return column as Column<\n        TData,\n        TValue,\n        TFilterFns,\n        TSortingFns,\n        TAggregationFns\n      >\n    },\n\n    getAllColumns: memo(\n      () => [instance.getColumnDefs()],\n      columnDefs => {\n        if (process.env.NODE_ENV !== 'production' && instance.options.debug)\n          console.info('Building Columns...')\n\n        const recurseColumns = (\n          columnDefs: ColumnDef<\n            TData,\n            TValue,\n            TFilterFns,\n            TSortingFns,\n            TAggregationFns\n          >[],\n          parent?: Column<\n            TData,\n            TValue,\n            TFilterFns,\n            TSortingFns,\n            TAggregationFns\n          >,\n          depth = 0\n        ): Column<\n          TData,\n          TValue,\n          TFilterFns,\n          TSortingFns,\n          TAggregationFns\n        >[] => {\n          return columnDefs.map(columnDef => {\n            const column = instance.createColumn(columnDef, depth, parent)\n\n            column.columns = columnDef.columns\n              ? recurseColumns(columnDef.columns, column, depth + 1)\n              : []\n\n            return column\n          })\n        }\n\n        return recurseColumns(columnDefs)\n      },\n      'getAllColumns',\n      instance.options.debug\n    ),\n\n    getAllFlatColumns: memo(\n      () => [instance.getAllColumns()],\n      allColumns => {\n        return allColumns.flatMap(column => {\n          return column.getFlatColumns()\n        })\n      },\n      'getAllFlatColumns',\n      instance.options.debug\n    ),\n\n    getAllFlatColumnsById: memo(\n      () => [instance.getAllFlatColumns()],\n      flatColumns => {\n        return flatColumns.reduce((acc, column) => {\n          acc[column.id] = column\n          return acc\n        }, {} as Record<string, Column<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>>)\n      },\n      'getAllFlatColumnsById',\n      instance.options.debug\n    ),\n\n    getAllLeafColumns: memo(\n      () => [instance.getAllColumns(), instance.getOrderColumnsFn()],\n      (allColumns, orderColumns) => {\n        let leafColumns = allColumns.flatMap(column => column.getLeafColumns())\n        return orderColumns(leafColumns)\n      },\n      'getAllLeafColumns',\n      instance.options.debug\n    ),\n\n    getColumn: columnId => {\n      const column = instance.getAllFlatColumnsById()[columnId]\n\n      if (!column) {\n        if (process.env.NODE_ENV !== 'production') {\n          console.warn(\n            `[React Table] Column with id ${columnId} does not exist.`\n          )\n        }\n        throw new Error()\n      }\n\n      return column\n    },\n\n    getColumnWidth: (columnId: string) => {\n      const column = instance.getColumn(columnId)\n\n      if (!column) {\n        throw new Error()\n      }\n\n      return Math.min(\n        Math.max(column.minWidth ?? 0, column.width ?? 0),\n        column.maxWidth ?? 0\n      )\n    },\n\n    createCell: (row, column, value) => {\n      const cell: Cell<\n        TData,\n        TValue,\n        TFilterFns,\n        TSortingFns,\n        TAggregationFns\n      > = {\n        id: `${row.id}_${column.id}`,\n        rowId: row.id,\n        columnId: column.id,\n        row,\n        column,\n        value,\n        getCellProps: userProps =>\n          instance.getCellProps(row.id, column.id, userProps)!,\n        renderCell: () => flexRender(column.cell, { column, cell, value }),\n      }\n\n      Object.assign(cell, {\n        ...Grouping.createCell(\n          cell as Cell<\n            TData,\n            TValue,\n            TFilterFns,\n            TSortingFns,\n            TAggregationFns\n          > &\n            Grouping.GroupingCell,\n          column,\n          row as Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n          instance\n        ),\n      })\n\n      return cell\n    },\n\n    createRow: (id, original, rowIndex, depth, values) => {\n      let row: CoreRow<\n        TData,\n        TValue,\n        TFilterFns,\n        TSortingFns,\n        TAggregationFns\n      > = {\n        id,\n        index: rowIndex,\n        original,\n        depth,\n        values,\n        subRows: [],\n        leafRows: [],\n        getRowProps: userProps => instance.getRowProps(row.id, userProps)!,\n        getAllCells: undefined!,\n        getAllCellsByColumnId: undefined!,\n      }\n\n      row.getAllCells = memo(\n        () => [instance.getAllLeafColumns()],\n        leafColumns => {\n          return leafColumns.map(column => {\n            return instance.createCell(\n              row as Row<\n                TData,\n                TValue,\n                TFilterFns,\n                TSortingFns,\n                TAggregationFns\n              >,\n              column,\n              row.values[column.id]\n            )\n          })\n        },\n        process.env.NODE_ENV !== 'production' ? 'row.getAllCells' : '',\n        instance.options.debug\n      )\n\n      row.getAllCellsByColumnId = memo(\n        () => [row.getAllCells()],\n        allCells => {\n          return allCells.reduce((acc, cell) => {\n            acc[cell.columnId] = cell\n            return acc\n          }, {} as Record<string, Cell<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>>)\n        },\n        'row.getAllCellsByColumnId',\n        instance.options.debug\n      )\n\n      row = Object.assign(\n        row,\n        Headers.createRow(\n          row as Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n          instance\n        ),\n        Grouping.createRow(\n          row as Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n          instance\n        ),\n        Expanding.createRow(\n          row as Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>,\n          instance\n        )\n      )\n\n      return row as Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n    },\n\n    getCoreRowModel: memo(\n      () => [instance.options.data],\n      (\n        data\n      ): {\n        rows: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>[]\n        flatRows: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>[]\n        rowsById: Record<\n          string,\n          Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n        >\n      } => {\n        if (process.env.NODE_ENV !== 'production' && instance.options.debug)\n          console.info('Accessing...')\n\n        // Auto-reset data-dependent states if configured\n        if (\n          instance.options.autoResetColumnFilters &&\n          // @ts-ignore\n          instance.getRowModelNonFirst\n        ) {\n          instance.resetColumnFilters()\n        }\n\n        if (\n          instance.options.autoResetGlobalFilter &&\n          // @ts-ignore\n          instance.getRowModelNonFirst\n        ) {\n          instance.resetGlobalFilter()\n        }\n\n        if (\n          instance.options.autoResetSorting &&\n          // @ts-ignore\n          instance.getRowModelNonFirst\n        ) {\n          instance.resetSorting()\n        }\n\n        if (\n          instance.options.autoResetGrouping &&\n          // @ts-ignore\n          instance.getRowModelNonFirst\n        ) {\n          instance.resetGrouping()\n        }\n\n        if (\n          instance.options.autoResetExpanded &&\n          // @ts-ignore\n          instance.getRowModelNonFirst\n        ) {\n          instance.resetExpanded()\n        }\n\n        // @ts-ignore\n        instance.getRowModelNonFirst = true\n\n        // Access the row model using initial columns\n        const rows: Row<\n          TData,\n          TValue,\n          TFilterFns,\n          TSortingFns,\n          TAggregationFns\n        >[] = []\n        const flatRows: Row<\n          TData,\n          TValue,\n          TFilterFns,\n          TSortingFns,\n          TAggregationFns\n        >[] = []\n        const rowsById: Record<\n          string,\n          Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n        > = {}\n\n        const leafColumns = instance.getAllLeafColumns()\n\n        const accessRow = (\n          originalRow: TData,\n          rowIndex: number,\n          depth = 0,\n          parentRows: Row<\n            TData,\n            TValue,\n            TFilterFns,\n            TSortingFns,\n            TAggregationFns\n          >[],\n          parent?: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n        ) => {\n          const id = instance.getRowId(originalRow, rowIndex, parent)\n\n          if (!id) {\n            if (process.env.NODE_ENV !== 'production') {\n              throw new Error(`getRowId expected an ID, but got ${id}`)\n            }\n          }\n\n          const values: Record<string, any> = {}\n\n          for (let i = 0; i < leafColumns.length; i++) {\n            const column = leafColumns[i]\n            if (column && column.accessorFn) {\n              values[column.id] = column.accessorFn(originalRow, rowIndex)\n            }\n          }\n\n          // Make the row\n          const row = instance.createRow(\n            id,\n            originalRow,\n            rowIndex,\n            depth,\n            values\n          )\n\n          // Push instance row into the parentRows array\n          parentRows.push(row)\n          // Keep track of every row in a flat array\n          flatRows.push(row)\n          // Also keep track of every row by its ID\n          rowsById[id] = row\n\n          // Get the original subrows\n          if (instance.options.getSubRows) {\n            const originalSubRows = instance.options.getSubRows(\n              originalRow,\n              rowIndex\n            )\n\n            // Then recursively access them\n            if (originalSubRows?.length) {\n              row.originalSubRows = originalSubRows\n              const subRows: Row<\n                TData,\n                TValue,\n                TFilterFns,\n                TSortingFns,\n                TAggregationFns\n              >[] = []\n\n              for (let i = 0; i < row.originalSubRows.length; i++) {\n                accessRow(\n                  row.originalSubRows[i] as TData,\n                  i,\n                  depth + 1,\n                  subRows,\n                  row\n                )\n              }\n              // Keep the new subRows array on the row\n              row.subRows = subRows\n              row.leafRows = flattenBy(subRows, d => d.leafRows)\n            }\n          }\n        }\n\n        for (let i = 0; i < data.length; i++) {\n          accessRow(data[i] as TData, i, 0, rows)\n        }\n\n        return { rows, flatRows, rowsById }\n      },\n      'getRowModel',\n      instance.options.debug\n    ),\n\n    // The standard\n\n    getCoreRows: () => {\n      return instance.getCoreRowModel().rows\n    },\n\n    getCoreFlatRows: () => {\n      return instance.getCoreRowModel().flatRows\n    },\n\n    getCoreRowsById: () => {\n      return instance.getCoreRowModel().rowsById\n    },\n\n    // The final calls start at the bottom of the model,\n    // expanded rows, which then work their way up\n\n    getRowModel: () => {\n      return instance.getExpandedRowModel()\n    },\n\n    getRows: () => {\n      return instance.getRowModel().rows\n    },\n\n    getFlatRows: () => {\n      return instance.getRowModel().flatRows\n    },\n\n    getRowsById: () => {\n      return instance.getRowModel().rowsById\n    },\n\n    getRow: (id: string) => {\n      const row = instance.getRowsById()[id]\n\n      if (!row) {\n        if (process.env.NODE_ENV !== 'production') {\n          throw new Error(`getRow expected an ID, but got ${id}`)\n        }\n        throw new Error()\n      }\n\n      return row\n    },\n\n    getCell: (rowId: string, columnId: string) => {\n      const row = instance.getRow(rowId)\n\n      if (!row) {\n        if (process.env.NODE_ENV !== 'production') {\n          throw new Error(`[React Table] could not find row with id ${rowId}`)\n        }\n        throw new Error()\n      }\n\n      const cell = row.getAllCellsByColumnId()[columnId]\n\n      if (!cell) {\n        if (process.env.NODE_ENV !== 'production') {\n          throw new Error(\n            `[React Table] could not find cell ${columnId} in row ${rowId}`\n          )\n        }\n        throw new Error()\n      }\n\n      return cell\n    },\n\n    getTableProps: userProps => {\n      return propGetter(\n        {\n          role: 'table',\n        },\n        userProps\n      )\n    },\n\n    getTableBodyProps: userProps => {\n      return propGetter(\n        {\n          role: 'rowgroup',\n        },\n        userProps\n      )\n    },\n\n    getRowProps: (rowId, userProps) => {\n      const row = instance.getRow(rowId)\n      if (!row) {\n        return\n      }\n\n      return propGetter(\n        {\n          key: row.id,\n          role: 'row',\n        },\n        userProps\n      )\n    },\n\n    getCellProps: (rowId, columnId, userProps) => {\n      const cell = instance.getCell(rowId, columnId)\n\n      if (!cell) {\n        return\n      }\n\n      return propGetter(\n        {\n          key: cell.id,\n          role: 'gridcell',\n        },\n        userProps\n      )\n    },\n  }\n\n  return Object.assign(instance, finalInstance)\n}\n","import * as React from 'react'\nimport { Cell, Column, Row } from '.'\nimport { createTableInstance } from './core'\nimport { ReactTable, ColumnDef, AccessorFn, Options } from './types'\nimport { Overwrite } from './utils'\n\ntype TableHelper<TData, TValue, TFilterFns, TSortingFns, TAggregationFns> = {\n  RowType: <TTData>() => TableHelper<\n    TTData,\n    TValue,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >\n\n  FilterFns: <TTFilterFns>(\n    filterFns: TTFilterFns\n  ) => TableHelper<TData, TValue, TTFilterFns, TSortingFns, TAggregationFns>\n\n  SortingFns: <TTSortingFns>(\n    sortingFns: TTSortingFns\n  ) => TableHelper<TData, TValue, TFilterFns, TTSortingFns, TAggregationFns>\n\n  AggregationFns: <TTAggregationFns>(\n    aggregationFns: TTAggregationFns\n  ) => TableHelper<TData, TValue, TFilterFns, TSortingFns, TTAggregationFns>\n\n  createColumns: (\n    columns: ColumnDef<\n      TData,\n      TValue,\n      TFilterFns,\n      TSortingFns,\n      TAggregationFns\n    >[]\n  ) => ColumnDef<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>[]\n\n  createGroup: (\n    column: Overwrite<\n      ColumnDef<TData, unknown, TFilterFns, TSortingFns, TAggregationFns>,\n      { __generated?: never; accessorFn?: never; accessorKey?: never }\n    >\n  ) => ColumnDef<TData, unknown, TFilterFns, TSortingFns, TAggregationFns>\n\n  createColumn: <TAccessor extends AccessorFn<TData> | keyof TData>(\n    accessor: TAccessor,\n    column: TAccessor extends (...args: any[]) => any\n      ? // Accessor Fn\n        Overwrite<\n          ColumnDef<\n            TData,\n            ReturnType<TAccessor>,\n            TFilterFns,\n            TSortingFns,\n            TAggregationFns\n          >,\n          {\n            __generated?: never\n            accessorFn?: never\n            accessorKey?: never\n            id: string\n          }\n        >\n      : TAccessor extends keyof TData\n      ? // Accessor Key\n        Overwrite<\n          ColumnDef<\n            TData,\n            TData[TAccessor],\n            TFilterFns,\n            TSortingFns,\n            TAggregationFns\n          >,\n          { __generated?: never; accessorFn?: never; accessorKey?: never }\n        >\n      : never\n  ) => ColumnDef<\n    TData,\n    TAccessor extends (...args: any[]) => any\n      ? ReturnType<TAccessor>\n      : TAccessor extends keyof TData\n      ? TData[TAccessor]\n      : never,\n    TFilterFns,\n    TSortingFns,\n    TAggregationFns\n  >\n\n  useTable: <TData, TValue, TFilterFns, TSortingFns, TAggregationFns>(\n    options: Options<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n  ) => ReactTable<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n\n  types: {\n    instance: ReactTable<\n      TData,\n      TValue,\n      TFilterFns,\n      TSortingFns,\n      TAggregationFns\n    >\n    columnDef: ColumnDef<\n      TData,\n      TValue,\n      TFilterFns,\n      TSortingFns,\n      TAggregationFns\n    >\n    column: Column<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n    row: Row<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n    cell: Cell<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n  }\n}\n\nexport function createTable<\n  TData,\n  TValue,\n  TFilterFns,\n  TSortingFns,\n  TAggregationFns\n>(): TableHelper<TData, TValue, TFilterFns, TSortingFns, TAggregationFns> {\n  return {\n    RowType: () => createTable(),\n    FilterFns: () => createTable(),\n    SortingFns: () => createTable(),\n    AggregationFns: () => createTable(),\n    createColumns: columns => columns,\n    createColumn: (accessor, column) => {\n      column = {\n        ...column,\n        id: column.id,\n      }\n\n      if (typeof accessor === 'string') {\n        return {\n          ...column,\n          id: column.id ?? accessor,\n          accessorKey: accessor,\n          __generated: true,\n        }\n      }\n\n      if (typeof accessor === 'function') {\n        return {\n          ...column,\n          accessorFn: accessor,\n          __generated: true,\n        }\n      }\n\n      throw new Error('Invalid accessor')\n    },\n    createGroup: column => ({\n      ...column,\n      __generated: true,\n    }),\n    useTable: <TData, TValue, TFilterFns, TSortingFns, TAggregationFns>(\n      options: Options<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n    ): ReactTable<TData, TValue, TFilterFns, TSortingFns, TAggregationFns> => {\n      const instanceRef = React.useRef<\n        ReactTable<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n      >(undefined!)\n\n      const rerender = React.useReducer(() => ({}), {})[1]\n\n      if (!instanceRef.current) {\n        instanceRef.current = createTableInstance<\n          TData,\n          TValue,\n          TFilterFns,\n          TSortingFns,\n          TAggregationFns\n        >(options, rerender)\n      }\n\n      instanceRef.current.updateOptions(options)\n\n      return instanceRef.current\n    },\n    types: undefined as any,\n  } as TableHelper<TData, TValue, TFilterFns, TSortingFns, TAggregationFns>\n}\n"],"names":["columnFilterRowsFn","instance","columnFilters","rowModel","newFilteredFlatRows","newFilteredRowsById","filterFromChildrenUp","options","filterRows","rowsToFilter","depth","forEach","columnId","id","filterValue","value","column","getColumn","process","env","NODE_ENV","console","warn","Error","preFilteredRows","getPreFilteredRows","filterFn","getColumnFilterFn","recurseFilterRows","filter","row","subRows","length","push","rows","flatRows","rowsById","globalFilterRowsFn","globalFilter","getGlobalFilterFn","filterableColumns","getAllLeafColumns","getCanGlobalFilter","filterableColumnIds","map","d","sortRowsFn","sortingState","sortedFlatRows","availableSorting","sort","getColumnCanSort","columnInfoById","sortEntry","sortUndefined","invertSorting","sortingFn","getColumnSortingFn","sortData","sortedData","slice","rowA","rowB","i","columnInfo","isDesc","desc","aValue","values","bValue","aUndefined","bUndefined","sortInt","index","functionalUpdate","updater","input","makeStateUpdater","key","setState","old","document","React","useLayoutEffect","useEffect","isFunction","Function","flattenBy","arr","getChildren","flat","recurse","subArr","item","children","propGetter","initial","getter","memo","getDeps","fn","debug","deps","result","newDeps","newSerializedDeps","oldSerializedDeps","depsChanged","some","dep","info","_","Boolean","reduce","accu","curr","parent","flexRender","Comp","props","isReactComponent","component","isClassComponent","isExoticComponent","proto","Object","getPrototypeOf","prototype","$$typeof","includes","description","groupRowsFn","groupingState","sortedRowModel","existingGrouping","aggregateRowsToValues","leafRows","groupedRows","aggregateFn","getColumnAggregationFn","groupedValues","leafValues","columnValue","aggregateValue","aggregationType","groupedFlatRows","groupedRowsById","groupUpRecursively","parentId","rowGroupsMap","groupBy","aggregatedGroupedRows","Array","from","entries","groupingValue","createRow","undefined","assign","groupingColumnId","subRow","groupMap","Map","resKey","previous","get","set","expandRowsFn","_expandedState","expandedRows","expandSubRows","handleRow","getIsRowExpanded","getInitialState","columnVisibility","getDefaultOptions","onColumnVisibilityChange","getDefaultColumn","defaultIsVisible","createColumn","getCanHide","getColumnCanHide","getIsVisible","getColumnIsVisible","toggleVisibility","toggleColumnVisibility","getToggleVisibilityProps","userProps","type","checked","title","onChange","e","target","getInstance","getVisibleFlatColumns","getAllFlatColumns","join","allFlatColumns","getVisibleLeafColumns","setColumnVisibility","getState","toggleAllColumnsVisible","getIsAllColumnsVisible","obj","enableHiding","defaultCanHide","getIsSomeColumnsVisible","getToggleAllColumnsVisibilityProps","indeterminate","aggregationTypes","sum","min","max","extent","mean","median","unique","uniqueCount","count","_leafValues","childValues","next","Math","Set","size","grouping","onGroupingChange","autoResetGrouping","groupedColumnMode","getCanGroup","getColumnCanGroup","getGroupedIndex","getColumnGroupedIndex","getIsGrouped","getColumnIsGrouped","toggleGrouping","toggleColumnGrouping","getToggleGroupingProps","getColumnAutoAggregationFn","firstRow","getCoreFlatRows","toString","call","userAggregationTypes","getColumnAutoFilterFn","setGrouping","enableGrouping","defaultCanGroup","accessorFn","indexOf","resetGrouping","initialState","canGroup","initialProps","onClick","persist","getRowIsGrouped","rowId","getRow","getGroupedRowModel","getSortedRowModel","getPreGroupedRows","getPreGroupedFlatRows","getPreGroupedRowsById","getGroupedRows","getGroupedFlatRows","getGroupedRowsById","createCell","cell","_instance","getIsPlaceholder","getIsAggregated","orderColumns","leafColumns","nonGroupingColumns","col","groupingColumns","g","find","columnOrder","onColumnOrderChange","setColumnOrder","resetColumnOrder","getOrderColumnsFn","columns","orderedColumns","columnOrderCopy","columnsCopy","targetColumnId","shift","foundIndex","findIndex","splice","Grouping","columnPinning","left","right","onColumnPinningChange","getCanPin","getColumnCanPin","getPinnedIndex","getColumnPinnedIndex","getIsPinned","getColumnIsPinned","pin","position","pinColumn","setColumnPinning","resetColumnPinning","columnIds","getLeafColumns","enablePinning","defaultCanPin","leafColumnIds","isLeft","isRight","_getAllVisibleCells","getAllCells","getVisibleCells","getLeftVisibleCells","getCenterVisibleCells","getRightVisibleCells","center","allCells","leftAndRight","cells","createHeader","header","isPlaceholder","placeholderId","subHeaders","colSpan","rowSpan","getWidth","getLeafHeaders","leafHeaders","recurseHeader","h","getHeaderProps","getFooterProps","renderHeader","renderFooter","footer","getHeaderGroups","getAllColumns","allColumns","leftColumns","rightColumns","centerColumns","headerGroups","buildHeaderGroups","getCenterHeaderGroups","getLeftHeaderGroups","getRightHeaderGroups","getFooterGroups","reverse","getLeftFooterGroups","getCenterFooterGroups","getRightFooterGroups","getFlatHeaders","headerGroup","headers","getLeftFlatHeaders","getCenterFlatHeaders","getRightFlatHeaders","getCenterLeafHeaders","flatHeaders","getLeftLeafHeaders","getRightLeafHeaders","getHeader","getHeaderGroupProps","role","getFooterGroupProps","getTotalWidth","width","columnsToGroup","headerFamily","maxDepth","findMaxDepth","createHeaderGroup","headersToGroup","getterValue","parentHeaders","headerToGroup","latestParentHeader","isLeafHeader","bottomHeaders","recurseHeadersForSpans","filteredHeaders","childRowSpans","childColSpan","childRowSpan","minChildRowSpan","filterTypes","includesString","includesStringSensitive","equalsString","equalsStringSensitive","arrIncludes","arrIncludesAll","equals","weakEquals","betweenNumberRange","search","String","toLowerCase","autoRemove","val","testFalsey","rowValue","every","unsafeMin","unsafeMax","parsedMin","parseFloat","parsedMax","Number","isNaN","Infinity","temp","filterType","onColumnFiltersChange","onGlobalFilterChange","autoResetColumnFilters","autoResetGlobalFilter","globalFilterType","getColumnCanGlobalFilterFn","getAllCellsByColumnId","getFacetInfo","preFilteredUniqueValues","preFilteredMinMaxValues","has","getCanColumnFilter","getColumnCanColumnFilter","getColumnCanGlobalFilter","getColumnFilterIndex","getIsColumnFiltered","getColumnIsFiltered","getColumnFilterValue","setColumnFilterValue","getPreFilteredUniqueValues","getPreFilteredMinMaxValues","isArray","getGlobalAutoFilterFn","userFilterTypes","setColumnFilters","updateFn","shouldAutoRemoveFilter","setGlobalFilter","resetGlobalFilter","enableAllFilters","enableColumnFilter","enableFilters","enableColumnFilters","defaultCanFilter","defaultCanColumnFilter","enableGlobalFilter","defaultCanGlobalFilter","previousfilter","newFilter","newFilterObj","resetColumnFilters","getColumnFilteredRowModel","getCoreRowModel","columnFiltersFn","columnFilteredRowModel","nonFilteredColumns","getPreColumnFilteredRows","getPreColumnFilteredFlatRows","getPreColumnFilteredRowsById","getColumnFilteredRows","getColumnFilteredFlatRows","getColumnFilteredRowsById","getGlobalFilteredRowModel","globalFilterValue","globalFiltersFn","globalFilteredRowModel","getPreGlobalFilteredRows","getPreGlobalFilteredFlatRows","getPreGlobalFilteredRowsById","getGlobalFilteredRows","getGlobalFilteredFlatRows","getGlobalFilteredRowsById","reSplitAlphaNumeric","sortTypes","alphanumeric","alphanumericCaseSensitive","text","textCaseSensitive","datetime","basic","compareAlphanumeric","aStr","bStr","a","split","b","aa","bb","an","parseInt","bn","combo","compareBasic","getTime","sortType","sorting","onSortingChange","autoResetSorting","getCanSort","getCanMultiSort","getColumnCanMultiSort","getSortIndex","getColumnSortIndex","getIsSorted","getColumnIsSorted","toggleSorting","isMulti","toggleColumnSorting","getToggleSortingProps","getColumnAutoSortingFn","userSortTypes","setSorting","multi","existingSorting","existingIndex","hasDescDefined","newSorting","sortAction","sortDescFirst","enableSortingRemoval","enableMultiRemove","maxMultiSortColCount","MAX_SAFE_INTEGER","enableSorting","defaultCanSort","enableMultiSort","columnSort","resetSorting","canSort","isMultiSortEvent","getPreSortedRows","getPreSortedFlatRows","getPreSortedRowsById","getSortedRows","getSortedFlatRows","getSortedRowsById","expanded","onExpandedChange","autoResetExpanded","original","paginateExpandedRows","setExpanded","toggleRowExpanded","exists","oldExpanded","keys","getRowsById","rest","toggleAllRowsExpanded","getIsAllRowsExpanded","resetExpanded","getRowCanExpand","enableExpanded","defaultCanExpand","getToggleExpandedProps","canExpand","getToggleAllRowsExpandedProps","getExpandedDepth","rowIds","splitId","getExpandedRowModel","getPreExpandedRows","getPreExpandedFlatRows","getPreExpandedRowsById","getExpandedRows","getExpandedFlatRows","getExpandedRowsById","toggleExpanded","getIsExpanded","getCanExpand","stopPropagation","createTableInstance","rerender","defaultOptions","Visibility","Ordering","Pinning","Filters","Sorting","Expanding","defaultState","buildOptions","state","finalInstance","Headers","internalState","reset","updateOptions","newOptions","getRowId","shouldRerender","newState","onStateChange","defaultColumn","getColumnDefs","columnDef","accessorKey","originalRow","minWidth","maxWidth","getColumnWidth","getFlatColumns","flatMap","columnDefs","recurseColumns","getAllFlatColumnsById","flatColumns","acc","getCellProps","renderCell","rowIndex","getRowProps","data","getRowModelNonFirst","accessRow","parentRows","getSubRows","originalSubRows","getCoreRows","getCoreRowsById","getRowModel","getRows","getFlatRows","getCell","getTableProps","getTableBodyProps","createTable","RowType","FilterFns","SortingFns","AggregationFns","createColumns","accessor","__generated","createGroup","useTable","instanceRef","useRef","useReducer","current","types"],"mappings":"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"}